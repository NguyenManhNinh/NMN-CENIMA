<mxfile host="app.diagrams.net">
  <diagram name="Class Diagram - BookingPage" id="class-booking-word">
    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="1000" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="Class Diagram - BookingPage (Theo Tài Liệu Word)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="350" y="20" width="700" height="40" as="geometry" />
        </mxCell>

        <!-- Class: Movie -->
        <mxCell id="movie-class" value="Movie" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2;fontSize=14" vertex="1" parent="1">
          <mxGeometry x="120" y="120" width="320" height="530" as="geometry" />
        </mxCell>

        <mxCell id="movie-divider1" value="" style="line;strokeWidth=2;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#6c8ebf;" vertex="1" parent="movie-class">
          <mxGeometry y="40" width="320" height="8" as="geometry" />
        </mxCell>

        <mxCell id="movie-attrs" value="+ _id: ObjectId&#xa;+ title: String&#xa;+ description: String&#xa;+ posterUrl: String&#xa;+ bannerUrl: String&#xa;+ trailerUrl: String&#xa;+ duration: Number&#xa;+ ageRating: String&#xa;+ releaseDate: Date&#xa;+ rating: Number&#xa;+ ratingCount: Number&#xa;+ country: String&#xa;+ studio: String&#xa;+ director: ObjectId&#xa;+ actors: ObjectId[]&#xa;+ genres: ObjectId[]" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=10;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;fontFamily=Courier New;" vertex="1" parent="movie-class">
          <mxGeometry y="48" width="320" height="372" as="geometry" />
        </mxCell>

        <mxCell id="movie-divider2" value="" style="line;strokeWidth=2;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#6c8ebf;" vertex="1" parent="movie-class">
          <mxGeometry y="420" width="320" height="8" as="geometry" />
        </mxCell>

        <mxCell id="movie-methods" value="+ getMovie(id): Movie&#xa;+ rateMovie(id, rating): Object" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=10;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;fontFamily=Courier New;" vertex="1" parent="movie-class">
          <mxGeometry y="428" width="320" height="102" as="geometry" />
        </mxCell>

        <!-- Class: Showtime -->
        <mxCell id="showtime-class" value="Showtime" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;fontSize=14" vertex="1" parent="1">
          <mxGeometry x="580" y="120" width="320" height="410" as="geometry" />
        </mxCell>

        <mxCell id="showtime-divider1" value="" style="line;strokeWidth=2;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#d6b656;" vertex="1" parent="showtime-class">
          <mxGeometry y="40" width="320" height="8" as="geometry" />
        </mxCell>

        <mxCell id="showtime-attrs" value="+ _id: ObjectId&#xa;+ movieId: ObjectId&#xa;+ cinemaId: ObjectId&#xa;+ roomId: ObjectId&#xa;+ startAt: Date&#xa;+ endAt: Date&#xa;+ basePrice: Number&#xa;+ format: String&#xa;+ language: String&#xa;+ status: String" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=10;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;fontFamily=Courier New;" vertex="1" parent="showtime-class">
          <mxGeometry y="48" width="320" height="272" as="geometry" />
        </mxCell>

        <mxCell id="showtime-divider2" value="" style="line;strokeWidth=2;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#d6b656;" vertex="1" parent="showtime-class">
          <mxGeometry y="320" width="320" height="8" as="geometry" />
        </mxCell>

        <mxCell id="showtime-methods" value="+ getAllShowtimes(filters): Showtime[]" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=10;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;fontFamily=Courier New;" vertex="1" parent="showtime-class">
          <mxGeometry y="328" width="320" height="82" as="geometry" />
        </mxCell>

        <!-- Class: Cinema -->
        <mxCell id="cinema-class" value="Cinema" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;fontSize=14" vertex="1" parent="1">
          <mxGeometry x="1000" y="120" width="320" height="310" as="geometry" />
        </mxCell>

        <mxCell id="cinema-divider1" value="" style="line;strokeWidth=2;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#82b366;" vertex="1" parent="cinema-class">
          <mxGeometry y="40" width="320" height="8" as="geometry" />
        </mxCell>

        <mxCell id="cinema-attrs" value="+ _id: ObjectId&#xa;+ name: String&#xa;+ address: String&#xa;+ city: String&#xa;+ phone: String&#xa;+ status: String" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=10;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;fontFamily=Courier New;" vertex="1" parent="cinema-class">
          <mxGeometry y="48" width="320" height="172" as="geometry" />
        </mxCell>

        <mxCell id="cinema-divider2" value="" style="line;strokeWidth=2;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#82b366;" vertex="1" parent="cinema-class">
          <mxGeometry y="220" width="320" height="8" as="geometry" />
        </mxCell>

        <mxCell id="cinema-methods" value="+ getAllCinemas(): Cinema[]&#xa;+ getCities(): String[]" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=10;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=11;fontFamily=Courier New;" vertex="1" parent="cinema-class">
          <mxGeometry y="228" width="320" height="82" as="geometry" />
        </mxCell>

        <!-- Relationship 1: Movie -> Showtime (1:N) -->
        <mxCell id="rel1" value="" style="endArrow=open;endFill=0;endSize=12;html=1;strokeWidth=2;exitX=1;exitY=0.25;entryX=0;entryY=0.25;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000" edge="1" parent="1" source="movie-class" target="showtime-class">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="440" y="252" as="sourcePoint" />
            <mxPoint x="580" y="252" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="rel1-label" value="movieId" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="480" y="230" width="60" height="20" as="geometry" />
        </mxCell>

        <mxCell id="rel1-mult1" value="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="445" y="232" width="20" height="20" as="geometry" />
        </mxCell>

        <mxCell id="rel1-mult2" value="0..*" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="545" y="232" width="30" height="20" as="geometry" />
        </mxCell>

        <!-- Relationship 2: Cinema -> Showtime (1:N) -->
        <mxCell id="rel2" value="" style="endArrow=open;endFill=0;endSize=12;html=1;strokeWidth=2;exitX=0;exitY=0.25;entryX=1;entryY=0.25;edgeStyle=orthogonalEdgeStyle;strokeColor=#000000" edge="1" parent="1" source="cinema-class" target="showtime-class">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="1000" y="197" as="sourcePoint" />
            <mxPoint x="900" y="197" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="rel2-label" value="cinemaId" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="920" y="175" width="65" height="20" as="geometry" />
        </mxCell>

        <mxCell id="rel2-mult1" value="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="975" y="177" width="20" height="20" as="geometry" />
        </mxCell>

        <mxCell id="rel2-mult2" value="0..*" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="905" y="177" width="30" height="20" as="geometry" />
        </mxCell>

        <!-- Notes Section -->
        <mxCell id="note1" value="&lt;b&gt;Quan hệ (Relationships):&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;&lt;b&gt;1. Movie → Showtime (1:N)&lt;/b&gt;&lt;br/&gt;• Một phim có nhiều suất chiếu&lt;br/&gt;• movieId là khóa ngoại trong Showtime&lt;br/&gt;• Cascade delete: Xóa phim → xóa showtimes&lt;br/&gt;&lt;br/&gt;&lt;b&gt;2. Cinema → Showtime (1:N)&lt;/b&gt;&lt;br/&gt;• Một rạp có nhiều suất chiếu&lt;br/&gt;• cinemaId là khóa ngoại trong Showtime&lt;br/&gt;• Một suất chiếu chỉ thuộc 1 rạp&lt;br/&gt;&lt;br/&gt;&lt;b&gt;Multiplicity:&lt;/b&gt;&lt;br/&gt;• 1: Exactly one (chính xác 1)&lt;br/&gt;• 0..*: Zero or many (0 hoặc nhiều)" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpaque=0;fillColor=#fff2cc;strokeColor=#d6b656;align=left;verticalAlign=top;fontSize=10;spacingLeft=10;spacingTop=10;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="120" y="700" width="350" height="280" as="geometry" />
        </mxCell>

        <mxCell id="note2" value="&lt;b&gt;Thuộc tính quan trọng:&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;&lt;b&gt;Movie:&lt;/b&gt;&lt;br/&gt;• rating: Điểm đánh giá trung bình (0-10)&lt;br/&gt;• ratingCount: Số lượt đánh giá&lt;br/&gt;• ageRating: P, C13, C16, C18&lt;br/&gt;• director/actors: Tham chiếu đến Person&lt;br/&gt;• genres: Tham chiếu đến Genre&lt;br/&gt;&lt;br/&gt;&lt;b&gt;Showtime:&lt;/b&gt;&lt;br/&gt;• format: 2D, 3D, IMAX&lt;br/&gt;• status: OPEN, CLOSED, CANCELED&lt;br/&gt;• startAt/endAt: Thời gian chiếu&lt;br/&gt;• roomId: Tham chiếu đến Room&lt;br/&gt;&lt;br/&gt;&lt;b&gt;Cinema:&lt;/b&gt;&lt;br/&gt;• city: Dùng để lọc rạp theo khu vực&lt;br/&gt;• status: OPEN, CLOSED, MAINTENANCE" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpaque=0;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;verticalAlign=top;fontSize=10;spacingLeft=10;spacingTop=10;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="520" y="700" width="350" height="280" as="geometry" />
        </mxCell>

        <mxCell id="note3" value="&lt;b&gt;Methods (Operations):&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;&lt;b&gt;Movie:&lt;/b&gt;&lt;br/&gt;• getMovie(id): Lấy thông tin phim&lt;br/&gt;• rateMovie(id, rating): Đánh giá phim&lt;br/&gt;  → Trả về {rating, ratingCount}&lt;br/&gt;&lt;br/&gt;&lt;b&gt;Showtime:&lt;/b&gt;&lt;br/&gt;• getAllShowtimes(filters): Lấy lịch chiếu&lt;br/&gt;  → Filter: movieId, date, cinemaId&lt;br/&gt;&lt;br/&gt;&lt;b&gt;Cinema:&lt;/b&gt;&lt;br/&gt;• getAllCinemas(): Lấy tất cả rạp&lt;br/&gt;• getCities(): Lấy danh sách thành phố&lt;br/&gt;&lt;br/&gt;&lt;b&gt;MongoDB Collections:&lt;/b&gt;&lt;br/&gt;• movies&lt;br/&gt;• showtimes&lt;br/&gt;• cinemas" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpaque=0;fillColor=#d5e8d4;strokeColor=#82b366;align=left;verticalAlign=top;fontSize=10;spacingLeft=10;spacingTop=10;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="920" y="700" width="350" height="280" as="geometry" />
        </mxCell>

        <!-- UML Legend -->
        <mxCell id="legend-box" value="&lt;b&gt;Chú thích UML:&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;fontSize=11;fontStyle=1;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="580" y="560" width="320" height="100" as="geometry" />
        </mxCell>

        <mxCell id="legend-content" value="&lt;b&gt;Class Structure:&lt;/b&gt;&lt;br/&gt;┌────────────┐&lt;br/&gt;│ ClassName  │ ← Tên lớp&lt;br/&gt;├────────────┤&lt;br/&gt;│ attributes │ ← Thuộc tính&lt;br/&gt;├────────────┤&lt;br/&gt;│ methods()  │ ← Phương thức&lt;br/&gt;└────────────┘" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontFamily=Courier New;spacingLeft=10;spacingTop=5" vertex="1" parent="1">
          <mxGeometry x="590" y="590" width="300" height="60" as="geometry" />
        </mxCell>

        <!-- Color Legend -->
        <mxCell id="color-legend-title" value="&lt;b&gt;Màu sắc phân biệt:&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="560" width="150" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-movie" value="Movie" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2;fontSize=10;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="595" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-showtime" value="Showtime" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;fontSize=10;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="240" y="595" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend-cinema" value="Cinema" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;fontSize=10;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="360" y="595" width="100" height="30" as="geometry" />
        </mxCell>

        <!-- Database Icon -->
        <mxCell id="db-icon" value="MongoDB" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1000" y="560" width="100" height="80" as="geometry" />
        </mxCell>

        <mxCell id="db-collections" value="Collections:&lt;br/&gt;• movies&lt;br/&gt;• showtimes&lt;br/&gt;• cinemas" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;spacingLeft=5" vertex="1" parent="1">
          <mxGeometry x="1120" y="575" width="100" height="50" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>