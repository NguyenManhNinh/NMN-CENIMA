<mxfile host="app.diagrams.net">
  <diagram name="Architecture - BookingPage" id="arch-booking">
    <mxGraphModel dx="1434" dy="764" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Title -->
        <mxCell id="title" value="Kiến trúc tổng thể phân hệ BookingPage" style="text;html=1;align=center;verticalAlign=middle;rounded=0;fontSize=18;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="400" y="40" width="600" height="40" as="geometry"/>
        </mxCell>

        <!-- Frontend -->
        <mxCell id="frontend" value="&lt;b style=&quot;font-size: 14px;&quot;&gt;Frontend&lt;/b&gt;&lt;br&gt;(React + Vite)&lt;br&gt;&lt;br&gt;- BookingPage.jsx&lt;br&gt;- movieApi.js / cinemaApi.js&lt;br&gt;- Axios Interceptors&lt;br&gt;&amp;nbsp;&amp;nbsp;(token + refresh)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2.5;align=center;verticalAlign=top;spacingTop=10;arcSize=10;" parent="1" vertex="1">
          <mxGeometry x="80" y="200" width="280" height="180" as="geometry"/>
        </mxCell>

        <!-- Backend -->
        <mxCell id="backend" value="&lt;b style=&quot;font-size: 14px;&quot;&gt;Backend&lt;/b&gt;&lt;br&gt;(Node.js + Express)&lt;br&gt;&lt;br&gt;- REST API&lt;br&gt;- MovieController&lt;br&gt;- ShowtimeController&lt;br&gt;- CinemaController&lt;br&gt;- Auth Middleware&lt;br&gt;&amp;nbsp;&amp;nbsp;(Access/Refresh token)&lt;br&gt;- Mongoose ODM" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2.5;align=center;verticalAlign=top;spacingTop=10;arcSize=10;" parent="1" vertex="1">
          <mxGeometry x="480" y="200" width="280" height="180" as="geometry"/>
        </mxCell>

        <!-- Database -->
        <mxCell id="database" value="&lt;b style=&quot;font-size: 14px;&quot;&gt;MongoDB&lt;/b&gt;&lt;br&gt;&lt;br&gt;- movies&lt;br&gt;- showtimes&lt;br&gt;- cinemas&lt;br&gt;- persons" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2.5;align=center;verticalAlign=top;spacingTop=20;" parent="1" vertex="1">
          <mxGeometry x="900" y="200" width="200" height="180" as="geometry"/>
        </mxCell>

        <!-- Arrow: Frontend <-> Backend (Request) -->
        <mxCell id="arrow1" value="&lt;b&gt;HTTP/REST&lt;/b&gt;&lt;br&gt;(JSON)" style="endArrow=classic;startArrow=classic;html=1;strokeWidth=2.5;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;" parent="1" source="frontend" target="backend" edge="1">
          <mxGeometry x="0.1" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>

        <!-- Arrow: Backend <-> Database -->
        <mxCell id="arrow2" value="&lt;b&gt;Query/CRUD&lt;/b&gt;&lt;br&gt;(Mongoose ODM)" style="endArrow=classic;startArrow=classic;html=1;strokeWidth=2.5;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;fontSize=12;" parent="1" source="backend" target="database" edge="1">
          <mxGeometry x="0.1" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>

        <!-- Description boxes below each component -->
        <mxCell id="fe-desc" value="Hiển thị trang đặt vé,&lt;br&gt;quản lý trạng thái chọn ghế,&lt;br&gt;tự động refresh token" style="text;html=1;align=center;verticalAlign=middle;rounded=1;fillColor=#e1f5fe;strokeColor=none;fontSize=11;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="80" y="400" width="280" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="be-desc" value="Xử lý logic nghiệp vụ,&lt;br&gt;xác thực JWT,&lt;br&gt;truy xuất dữ liệu" style="text;html=1;align=center;verticalAlign=middle;rounded=1;fillColor=#e8f5e9;strokeColor=none;fontSize=11;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="480" y="400" width="280" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="db-desc" value="Lưu trữ thông tin phim,&lt;br&gt;lịch chiếu, rạp chiếu,&lt;br&gt;và thông tin liên quan" style="text;html=1;align=center;verticalAlign=middle;rounded=1;fillColor=#fffde7;strokeColor=none;fontSize=11;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="900" y="400" width="200" height="60" as="geometry"/>
        </mxCell>

        <!-- Legend (rút gọn) -->
        <mxCell id="legend-box" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=1.5" parent="1" vertex="1">
          <mxGeometry x="80" y="520" width="400" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="legend-title" value="&lt;b&gt;Chú thích&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="80" y="525" width="400" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="legend-arrow" value="" style="endArrow=classic;startArrow=classic;html=1;strokeWidth=2.5" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="100" y="565" as="sourcePoint"/>
            <mxPoint x="180" y="565" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="legend-arrow-text" value="Giao tiếp 2 chiều: Request/Response" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="190" y="555" width="280" height="20" as="geometry"/>
        </mxCell>

        <mxCell id="legend-note" value="• Frontend gọi API qua Axios  •  Backend truy vấn DB qua Mongoose" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="100" y="575" width="360" height="20" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>