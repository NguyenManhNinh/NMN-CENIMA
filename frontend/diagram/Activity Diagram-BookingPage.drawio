<mxfile host="app.diagrams.net">
  <diagram name="Activity Diagram - BookingPage" id="activity-booking">
    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="900" pageHeight="1800" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="Activity Diagram - Luồng đặt vé (BookingPage)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="200" y="20" width="500" height="40" as="geometry" />
        </mxCell>

        <!-- Swimlane Backgrounds -->
        <mxCell id="clientLane" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1f5fe;opacity=30;strokeColor=none" vertex="1" parent="1">
          <mxGeometry x="120" y="80" width="660" height="500" as="geometry"/>
        </mxCell>

        <mxCell id="serverLane" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f1f8e9;opacity=30;strokeColor=none" vertex="1" parent="1">
          <mxGeometry x="120" y="580" width="660" height="920" as="geometry"/>
        </mxCell>

        <!-- Swimlanes labels -->
        <mxCell id="lane1" value="&lt;b&gt;Client (Frontend)&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="130" y="90" width="150" height="30" as="geometry"/>
        </mxCell>

        <mxCell id="lane2" value="&lt;b&gt;Server (Backend)&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="130" y="590" width="150" height="30" as="geometry"/>
        </mxCell>

        <!-- Divider line -->
        <mxCell id="divider" value="" style="endArrow=none;dashed=1;html=1;strokeWidth=3;strokeColor=#666666" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="120" y="580" as="sourcePoint"/>
            <mxPoint x="780" y="580" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- Start -->
        <mxCell id="start" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="425" y="140" width="50" height="50" as="geometry" />
        </mxCell>

        <!-- Activity 1: Truy cập trang -->
        <mxCell id="act1" value="Truy cập trang&#xa;/dat-ve/{movieId}" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="350" y="220" width="200" height="60" as="geometry" />
        </mxCell>

        <!-- Activity 2: Fetch API Movie -->
        <mxCell id="act2" value="Fetch API:&#xa;GET /api/v1/movies/:id" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="350" y="310" width="200" height="60" as="geometry" />
        </mxCell>

        <!-- Activity 3: Fetch thêm data -->
        <mxCell id="act3" value="Fetch API:&#xa;Cinemas/Cities/Showtimes" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="350" y="490" width="200" height="60" as="geometry" />
        </mxCell>

        <!-- Decision 1: Phim tồn tại? -->
        <mxCell id="dec1" value="Phim&#xa;tồn tại?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="375" y="640" width="150" height="100" as="geometry" />
        </mxCell>

        <!-- Activity 4: Hiển thị 404 -->
        <mxCell id="act4" value="Hiển thị 404&#xa;Movie Not Found Page" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="600" y="660" width="160" height="60" as="geometry" />
        </mxCell>

        <!-- End 1: 404 -->
        <mxCell id="end1" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="660" y="750" width="40" height="40" as="geometry" />
        </mxCell>

        <mxCell id="endring1" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=none;strokeColor=#000000;strokeWidth=3;" vertex="1" parent="1">
          <mxGeometry x="656" y="746" width="48" height="48" as="geometry" />
        </mxCell>

        <!-- Activity 5: Hiển thị thông tin phim -->
        <mxCell id="act5" value="Hiển thị thông tin phim&#xa;(poster, title, rating...)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="350" y="790" width="200" height="60" as="geometry" />
        </mxCell>

        <!-- Activity 6: User chọn ngày chiếu -->
        <mxCell id="act6" value="User chọn ngày chiếu" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="350" y="890" width="200" height="60" as="geometry" />
        </mxCell>

        <!-- Activity 7: Fetch API showtimes -->
        <mxCell id="act7" value="Fetch API showtimes&#xa;theo ngày đã chọn" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="350" y="990" width="200" height="60" as="geometry" />
        </mxCell>

        <!-- Decision 2: Có suất chiếu? -->
        <mxCell id="dec2" value="Có suất&#xa;chiếu?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="375" y="1100" width="150" height="100" as="geometry" />
        </mxCell>

        <!-- Activity 8: Không có suất chiếu -->
        <mxCell id="act8" value="Hiển thị thông báo&#xa;&quot;Không có suất chiếu&quot;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="600" y="1120" width="160" height="60" as="geometry" />
        </mxCell>

        <!-- End 2: Không có suất -->
        <mxCell id="end2" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="660" y="1210" width="40" height="40" as="geometry" />
        </mxCell>

        <mxCell id="endring2" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=none;strokeColor=#000000;strokeWidth=3;" vertex="1" parent="1">
          <mxGeometry x="656" y="1206" width="48" height="48" as="geometry" />
        </mxCell>

        <!-- Activity 9: User lọc khu vực/rạp -->
        <mxCell id="act9" value="User lọc khu vực/rạp&#xa;(optional)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="350" y="1250" width="200" height="60" as="geometry" />
        </mxCell>

        <!-- Activity 10: Hiển thị suất chiếu theo rạp -->
        <mxCell id="act10" value="Hiển thị danh sách&#xa;suất chiếu theo rạp" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="350" y="1340" width="200" height="60" as="geometry" />
        </mxCell>

        <!-- Activity 11: User chọn giờ chiếu -->
        <mxCell id="act11" value="User chọn giờ chiếu&#xa;(showtimeId)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="350" y="1430" width="200" height="60" as="geometry" />
        </mxCell>

        <!-- Activity 12: Redirect -->
        <mxCell id="act12" value="Redirect sang&#xa;/chon-ghe/{showtimeId}" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="350" y="1520" width="200" height="60" as="geometry" />
        </mxCell>

        <!-- End 3: Success -->
        <mxCell id="end3" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="430" y="1610" width="40" height="40" as="geometry" />
        </mxCell>

        <mxCell id="endring3" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=none;strokeColor=#000000;strokeWidth=3;" vertex="1" parent="1">
          <mxGeometry x="426" y="1606" width="48" height="48" as="geometry" />
        </mxCell>

        <!-- Arrows -->

        <!-- Start -> Act1 -->
        <mxCell id="arrow1" value="" style="endArrow=classic;html=1;strokeWidth=2;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="start" target="act1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="400" as="sourcePoint" />
            <mxPoint x="450" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Act1 -> Act2 -->
        <mxCell id="arrow2" value="" style="endArrow=classic;html=1;strokeWidth=2;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="act1" target="act2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="400" as="sourcePoint" />
            <mxPoint x="450" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Act2 -> Act3 -->
        <mxCell id="arrow3" value="" style="endArrow=classic;html=1;strokeWidth=2;exitX=0.5;exitY=1;entryX=0.5;entryY=0;edgeStyle=orthogonalEdgeStyle" edge="1" parent="1" source="act2" target="act3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="400" as="sourcePoint" />
            <mxPoint x="450" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Act3 -> Dec1 (cross swimlane) -->
        <mxCell id="arrow4" value="" style="endArrow=classic;html=1;strokeWidth=2;exitX=0.5;exitY=1;entryX=0.5;entryY=0;edgeStyle=orthogonalEdgeStyle" edge="1" parent="1" source="act3" target="dec1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="600" as="sourcePoint" />
            <mxPoint x="450" y="550" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Dec1 -> Act4 [Không] -->
        <mxCell id="arrow5" value="&lt;b&gt;[Không]&lt;/b&gt;" style="endArrow=classic;html=1;strokeWidth=2;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" edge="1" parent="1" source="dec1" target="act4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="900" as="sourcePoint" />
            <mxPoint x="450" y="850" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Act4 -> End1 -->
        <mxCell id="arrow6" value="" style="endArrow=classic;html=1;strokeWidth=2;exitX=0.5;exitY=1;entryX=0.5;entryY=0;edgeStyle=orthogonalEdgeStyle" edge="1" parent="1" source="act4" target="end1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="900" as="sourcePoint" />
            <mxPoint x="450" y="850" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Dec1 -> Act5 [Có] -->
        <mxCell id="arrow7" value="&lt;b&gt;[Có]&lt;/b&gt;" style="endArrow=classic;html=1;strokeWidth=2;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="dec1" target="act5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="1000" as="sourcePoint" />
            <mxPoint x="450" y="950" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Act5 -> Act6 -->
        <mxCell id="arrow8" value="" style="endArrow=classic;html=1;strokeWidth=2;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="act5" target="act6">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="1000" as="sourcePoint" />
            <mxPoint x="450" y="950" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Act6 -> Act7 -->
        <mxCell id="arrow9" value="" style="endArrow=classic;html=1;strokeWidth=2;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="act6" target="act7">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="1100" as="sourcePoint" />
            <mxPoint x="450" y="1050" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Act7 -> Dec2 -->
        <mxCell id="arrow10" value="" style="endArrow=classic;html=1;strokeWidth=2;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="act7" target="dec2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="1100" as="sourcePoint" />
            <mxPoint x="450" y="1050" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Dec2 -> Act8 [Không] -->
        <mxCell id="arrow11" value="&lt;b&gt;[Không]&lt;/b&gt;" style="endArrow=classic;html=1;strokeWidth=2;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" edge="1" parent="1" source="dec2" target="act8">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="1200" as="sourcePoint" />
            <mxPoint x="450" y="1150" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Act8 -> End2 -->
        <mxCell id="arrow12" value="" style="endArrow=classic;html=1;strokeWidth=2;exitX=0.5;exitY=1;entryX=0.5;entryY=0;edgeStyle=orthogonalEdgeStyle" edge="1" parent="1" source="act8" target="end2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="1200" as="sourcePoint" />
            <mxPoint x="450" y="1150" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Dec2 -> Act9 [Có] -->
        <mxCell id="arrow13" value="&lt;b&gt;[Có]&lt;/b&gt;" style="endArrow=classic;html=1;strokeWidth=2;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="dec2" target="act9">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="1250" as="sourcePoint" />
            <mxPoint x="450" y="1200" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Act9 -> Act10 -->
        <mxCell id="arrow14" value="" style="endArrow=classic;html=1;strokeWidth=2;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="act9" target="act10">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="1350" as="sourcePoint" />
            <mxPoint x="450" y="1300" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Act10 -> Act11 -->
        <mxCell id="arrow15" value="" style="endArrow=classic;html=1;strokeWidth=2;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="act10" target="act11">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="1450" as="sourcePoint" />
            <mxPoint x="450" y="1400" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Act11 -> Act12 -->
        <mxCell id="arrow16" value="" style="endArrow=classic;html=1;strokeWidth=2;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="act11" target="act12">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="1550" as="sourcePoint" />
            <mxPoint x="450" y="1500" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Act12 -> End3 -->
        <mxCell id="arrow17" value="" style="endArrow=classic;html=1;strokeWidth=2;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="act12" target="end3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="1650" as="sourcePoint" />
            <mxPoint x="450" y="1600" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Note -->
        <mxCell id="note" value="&lt;b&gt;Chú thích:&lt;/b&gt;&lt;br&gt;&lt;br&gt;• &lt;b&gt;Màu xanh dương:&lt;/b&gt; Client activities&lt;br&gt;• &lt;b&gt;Màu xanh lá:&lt;/b&gt; Server/Backend activities&lt;br&gt;• &lt;b&gt;Màu đỏ:&lt;/b&gt; Error handling&lt;br&gt;• &lt;b&gt;Màu vàng:&lt;/b&gt; Decision points&lt;br&gt;&lt;br&gt;&lt;b&gt;Luồng chính:&lt;/b&gt;&lt;br&gt;1. Client truy cập trang và fetch movie&lt;br&gt;2. Server kiểm tra phim tồn tại&lt;br&gt;3. Nếu có → hiển thị thông tin&lt;br&gt;4. User chọn ngày, lọc rạp&lt;br&gt;5. Chọn giờ chiếu → redirect chọn ghế&lt;br&gt;6. Nếu không có phim/suất → hiển thị lỗi" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpaque=0;fillColor=#fff2cc;strokeColor=#d6b656;align=left;verticalAlign=top;fontSize=11;spacingLeft=10;spacingTop=10;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="40" y="140" width="280" height="280" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend" value="&lt;b&gt;Ký hiệu UML:&lt;/b&gt;&lt;br&gt;&lt;br&gt;⚫ Start node (Initial)&lt;br&gt;◉ Final node (End)&lt;br&gt;◇ Decision (Diamond)&lt;br&gt;▭ Activity (Rectangle)&lt;br&gt;→ Control flow (Arrow)&lt;br&gt;&lt;br&gt;&lt;b&gt;Guard conditions:&lt;/b&gt;&lt;br&gt;[Có] / [Không]" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpaque=0;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;verticalAlign=top;fontSize=11;spacingLeft=10;spacingTop=10;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="40" y="450" width="280" height="200" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>