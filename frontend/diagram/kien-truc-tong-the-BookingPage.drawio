<mxfile host="app.diagrams.net">
  <diagram name="Kiáº¿n trÃºc tá»•ng thá»ƒ - BookingPage" id="arch-booking-page">
    <mxGraphModel dx="1434" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Title -->
        <mxCell id="title" value="HÃ¬nh 3.x. Kiáº¿n trÃºc tá»•ng thá»ƒ phÃ¢n há»‡ BookingPage (Trang Ä‘áº·t vÃ©)" style="text;html=1;align=center;verticalAlign=middle;rounded=0;fontSize=18;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="250" y="30" width="700" height="40" as="geometry"/>
        </mxCell>

        <!-- Subtitle -->
        <mxCell id="subtitle" value="NMN Cinema Website - PhÃ¢n há»‡ 2: Kiáº¿n trÃºc web tÃ¡ch lá»›p (3-tier Architecture)" style="text;html=1;align=center;verticalAlign=middle;rounded=0;fontSize=14;fontStyle=2;fontColor=#666666" parent="1" vertex="1">
          <mxGeometry x="350" y="65" width="500" height="30" as="geometry"/>
        </mxCell>

        <!-- ==================== FRONTEND BOX ==================== -->
        <mxCell id="frontend" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2.5;arcSize=10;" parent="1" vertex="1">
          <mxGeometry x="80" y="140" width="320" height="340" as="geometry"/>
        </mxCell>

        <mxCell id="frontend-title" value="&lt;b style='font-size:16px'&gt;Frontend&lt;/b&gt;&lt;br&gt;(React + Vite)" style="text;html=1;align=center;verticalAlign=top;rounded=0;strokeColor=none;fillColor=none;fontSize=13" parent="1" vertex="1">
          <mxGeometry x="80" y="150" width="320" height="40" as="geometry"/>
        </mxCell>

        <!-- Frontend Components -->
        <mxCell id="fe-component-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#90caf9;strokeWidth=1.5" parent="1" vertex="1">
          <mxGeometry x="100" y="200" width="280" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="fe-components" value="&lt;b&gt;React Components:&lt;/b&gt;&lt;br&gt;â€¢ BookingPage.jsx (trang Ä‘áº·t vÃ©)&lt;br&gt;â€¢ SeatSelectionPage.jsx (chá»n gháº¿)&lt;br&gt;â€¢ TrailerModal, MovieCard..." style="text;html=1;align=left;verticalAlign=top;rounded=0;strokeColor=none;fillColor=none;fontSize=11;spacingLeft=8;spacingTop=5" parent="1" vertex="1">
          <mxGeometry x="105" y="205" width="270" height="70" as="geometry"/>
        </mxCell>

        <!-- Frontend API Modules -->
        <mxCell id="fe-api-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=1.5" parent="1" vertex="1">
          <mxGeometry x="100" y="295" width="280" height="75" as="geometry"/>
        </mxCell>

        <mxCell id="fe-apis" value="&lt;b&gt;API Modules (Axios):&lt;/b&gt;&lt;br&gt;â€¢ movieApi.js - Láº¥y thÃ´ng tin phim&lt;br&gt;â€¢ cinemaApi.js - Láº¥y danh sÃ¡ch ráº¡p&lt;br&gt;â€¢ showtimeApi.js - Láº¥y suáº¥t chiáº¿u" style="text;html=1;align=left;verticalAlign=top;rounded=0;strokeColor=none;fillColor=none;fontSize=11;spacingLeft=8;spacingTop=5" parent="1" vertex="1">
          <mxGeometry x="105" y="300" width="270" height="65" as="geometry"/>
        </mxCell>

        <!-- Frontend Interceptors -->
        <mxCell id="fe-interceptor-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=1.5" parent="1" vertex="1">
          <mxGeometry x="100" y="385" width="280" height="75" as="geometry"/>
        </mxCell>

        <mxCell id="fe-interceptors" value="&lt;b&gt;Axios Interceptors:&lt;/b&gt;&lt;br&gt;â€¢ Auto attach Access Token&lt;br&gt;â€¢ Auto refresh token khi 401&lt;br&gt;â€¢ Error handling (redirect login)" style="text;html=1;align=left;verticalAlign=top;rounded=0;strokeColor=none;fillColor=none;fontSize=11;spacingLeft=8;spacingTop=5" parent="1" vertex="1">
          <mxGeometry x="105" y="390" width="270" height="65" as="geometry"/>
        </mxCell>

        <!-- ==================== BACKEND BOX ==================== -->
        <mxCell id="backend" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2.5;arcSize=10;" parent="1" vertex="1">
          <mxGeometry x="500" y="140" width="320" height="340" as="geometry"/>
        </mxCell>

        <mxCell id="backend-title" value="&lt;b style='font-size:16px'&gt;Backend API&lt;/b&gt;&lt;br&gt;(Node.js + Express)" style="text;html=1;align=center;verticalAlign=top;rounded=0;strokeColor=none;fillColor=none;fontSize=13" parent="1" vertex="1">
          <mxGeometry x="500" y="150" width="320" height="40" as="geometry"/>
        </mxCell>

        <!-- Backend Controllers -->
        <mxCell id="be-controller-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e9;strokeColor=#a5d6a7;strokeWidth=1.5" parent="1" vertex="1">
          <mxGeometry x="520" y="200" width="280" height="95" as="geometry"/>
        </mxCell>

        <mxCell id="be-controllers" value="&lt;b&gt;REST API Controllers:&lt;/b&gt;&lt;br&gt;â€¢ MovieController - CRUD phim&lt;br&gt;â€¢ ShowtimeController - CRUD suáº¥t chiáº¿u&lt;br&gt;â€¢ CinemaController - CRUD ráº¡p&lt;br&gt;â€¢ SeatHoldController - Giá»¯ gháº¿" style="text;html=1;align=left;verticalAlign=top;rounded=0;strokeColor=none;fillColor=none;fontSize=11;spacingLeft=8;spacingTop=5" parent="1" vertex="1">
          <mxGeometry x="525" y="205" width="270" height="85" as="geometry"/>
        </mxCell>

        <!-- Backend Middleware -->
        <mxCell id="be-middleware-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#ffcc80;strokeWidth=1.5" parent="1" vertex="1">
          <mxGeometry x="520" y="310" width="280" height="75" as="geometry"/>
        </mxCell>

        <mxCell id="be-middleware" value="&lt;b&gt;Middleware:&lt;/b&gt;&lt;br&gt;â€¢ JWT Auth (Access + Refresh token)&lt;br&gt;â€¢ Error Handler (AppError)&lt;br&gt;â€¢ Validation (express-validator)" style="text;html=1;align=left;verticalAlign=top;rounded=0;strokeColor=none;fillColor=none;fontSize=11;spacingLeft=8;spacingTop=5" parent="1" vertex="1">
          <mxGeometry x="525" y="315" width="270" height="65" as="geometry"/>
        </mxCell>

        <!-- Backend ORM -->
        <mxCell id="be-orm-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;strokeWidth=1.5" parent="1" vertex="1">
          <mxGeometry x="520" y="400" width="280" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="be-orm" value="&lt;b&gt;Mongoose ODM:&lt;/b&gt;&lt;br&gt;Schema + Validation + Middleware + Population" style="text;html=1;align=left;verticalAlign=top;rounded=0;strokeColor=none;fillColor=none;fontSize=11;spacingLeft=8;spacingTop=5" parent="1" vertex="1">
          <mxGeometry x="525" y="405" width="270" height="50" as="geometry"/>
        </mxCell>

        <!-- ==================== DATABASE BOX ==================== -->
        <mxCell id="database" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=20;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2.5" parent="1" vertex="1">
          <mxGeometry x="920" y="140" width="240" height="340" as="geometry"/>
        </mxCell>

        <mxCell id="database-title" value="&lt;b style='font-size:16px'&gt;MongoDB&lt;/b&gt;&lt;br&gt;(Database)" style="text;html=1;align=center;verticalAlign=top;rounded=0;strokeColor=none;fillColor=none;fontSize=13" parent="1" vertex="1">
          <mxGeometry x="920" y="160" width="240" height="40" as="geometry"/>
        </mxCell>

        <mxCell id="db-collections" value="&lt;b&gt;Collections:&lt;/b&gt;&lt;br&gt;&lt;br&gt;ðŸ“½ï¸ movies&lt;br&gt;ðŸŽ¬ showtimes&lt;br&gt;ðŸ¢ cinemas&lt;br&gt;ðŸšª rooms&lt;br&gt;ðŸ’º seatHolds&lt;br&gt;ðŸŽ« orders&lt;br&gt;ðŸ‘¤ users&lt;br&gt;ðŸŽ­ persons (actors/directors)&lt;br&gt;ðŸ·ï¸ genres" style="text;html=1;align=left;verticalAlign=top;rounded=0;strokeColor=none;fillColor=none;fontSize=12;spacingLeft=15;spacingTop=10" parent="1" vertex="1">
          <mxGeometry x="935" y="200" width="210" height="230" as="geometry"/>
        </mxCell>

        <!-- ==================== ARROWS ==================== -->
        <!-- Frontend -> Backend (Request) -->
        <mxCell id="arrow1-request" value="" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#1976d2;exitX=1;exitY=0.35;exitDx=0;exitDy=0;entryX=0;entryY=0.35;entryDx=0;entryDy=0" parent="1" source="frontend" target="backend" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="arrow1-label1" value="&lt;b&gt;HTTP/REST&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;rounded=0;strokeColor=none;fillColor=none;fontSize=11;fontColor=#1976d2" parent="1" vertex="1">
          <mxGeometry x="405" y="235" width="90" height="20" as="geometry"/>
        </mxCell>

        <mxCell id="arrow1-label2" value="GET /api/v1/movies/:id&lt;br&gt;GET /api/v1/showtimes&lt;br&gt;GET /api/v1/cinemas" style="text;html=1;align=center;verticalAlign=middle;rounded=0;strokeColor=none;fillColor=none;fontSize=9;fontColor=#666666" parent="1" vertex="1">
          <mxGeometry x="400" y="255" width="120" height="45" as="geometry"/>
        </mxCell>

        <!-- Backend -> Frontend (Response) -->
        <mxCell id="arrow2-response" value="" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#388e3c;exitX=0;exitY=0.65;exitDx=0;exitDy=0;entryX=1;entryY=0.65;entryDx=0;entryDy=0" parent="1" source="backend" target="frontend" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="arrow2-label" value="&lt;b&gt;JSON Response&lt;/b&gt;&lt;br&gt;{status, data: {...}}" style="text;html=1;align=center;verticalAlign=middle;rounded=0;strokeColor=none;fillColor=none;fontSize=10;fontColor=#388e3c" parent="1" vertex="1">
          <mxGeometry x="405" y="345" width="100" height="35" as="geometry"/>
        </mxCell>

        <!-- Backend -> Database (Query) -->
        <mxCell id="arrow3-query" value="" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#7b1fa2;exitX=1;exitY=0.35;exitDx=0;exitDy=0;entryX=0;entryY=0.35;entryDx=0;entryDy=0;entryPerimeter=0" parent="1" source="backend" target="database" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="arrow3-label" value="&lt;b&gt;Mongoose Query&lt;/b&gt;&lt;br&gt;find().populate()" style="text;html=1;align=center;verticalAlign=middle;rounded=0;strokeColor=none;fillColor=none;fontSize=10;fontColor=#7b1fa2" parent="1" vertex="1">
          <mxGeometry x="825" y="240" width="100" height="35" as="geometry"/>
        </mxCell>

        <!-- Database -> Backend (Documents) -->
        <mxCell id="arrow4-docs" value="" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#f57c00;exitX=0;exitY=0.65;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1;entryY=0.65;entryDx=0;entryDy=0" parent="1" source="database" target="backend" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="arrow4-label" value="&lt;b&gt;Documents&lt;/b&gt;&lt;br&gt;(BSON â†’ JSON)" style="text;html=1;align=center;verticalAlign=middle;rounded=0;strokeColor=none;fillColor=none;fontSize=10;fontColor=#f57c00" parent="1" vertex="1">
          <mxGeometry x="825" y="355" width="100" height="35" as="geometry"/>
        </mxCell>

        <!-- ==================== DESCRIPTION BOXES ==================== -->
        <mxCell id="desc-fe" value="&lt;b&gt;Vai trÃ²:&lt;/b&gt;&lt;br&gt;Hiá»ƒn thá»‹ chi tiáº¿t phim, lá»‹ch chiáº¿u theo ngÃ y,&lt;br&gt;lá»c ráº¡p/khu vá»±c, xem trailer, chuyá»ƒn Ä‘áº¿n trang chá»n gháº¿" style="text;html=1;align=left;verticalAlign=top;rounded=1;fillColor=#e1f5fe;strokeColor=#b3e0fc;fontSize=10;spacingLeft=8;spacingTop=5" parent="1" vertex="1">
          <mxGeometry x="80" y="500" width="320" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="desc-be" value="&lt;b&gt;Vai trÃ²:&lt;/b&gt;&lt;br&gt;Xá»­ lÃ½ logic nghiá»‡p vá»¥, xÃ¡c thá»±c JWT,&lt;br&gt;truy váº¥n DB vÃ  tráº£ dá»¯ liá»‡u chuáº©n hÃ³a JSON" style="text;html=1;align=left;verticalAlign=top;rounded=1;fillColor=#e8f5e9;strokeColor=#c8e6c9;fontSize=10;spacingLeft=8;spacingTop=5" parent="1" vertex="1">
          <mxGeometry x="500" y="500" width="320" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="desc-db" value="&lt;b&gt;Vai trÃ²:&lt;/b&gt;&lt;br&gt;LÆ°u trá»¯ dá»¯ liá»‡u NoSQL (documents),&lt;br&gt;há»— trá»£ query phá»©c táº¡p vÃ  aggregation" style="text;html=1;align=left;verticalAlign=top;rounded=1;fillColor=#fffde7;strokeColor=#fff9c4;fontSize=10;spacingLeft=8;spacingTop=5" parent="1" vertex="1">
          <mxGeometry x="920" y="500" width="240" height="60" as="geometry"/>
        </mxCell>

        <!-- ==================== LEGEND ==================== -->
        <mxCell id="legend-box" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=1.5" parent="1" vertex="1">
          <mxGeometry x="80" y="580" width="500" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="legend-title" value="&lt;b&gt;ChÃº thÃ­ch (Legend)&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="80" y="585" width="500" height="25" as="geometry"/>
        </mxCell>

        <!-- Legend Items Row 1 -->
        <mxCell id="legend-fe" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="100" y="620" width="25" height="18" as="geometry"/>
        </mxCell>
        <mxCell id="legend-fe-text" value="Frontend (React + Vite)" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=10" parent="1" vertex="1">
          <mxGeometry x="135" y="617" width="130" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="legend-be" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="280" y="620" width="25" height="18" as="geometry"/>
        </mxCell>
        <mxCell id="legend-be-text" value="Backend (Node.js + Express)" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=10" parent="1" vertex="1">
          <mxGeometry x="315" y="617" width="160" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="legend-db" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="490" y="620" width="25" height="18" as="geometry"/>
        </mxCell>
        <mxCell id="legend-db-text" value="Database" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=10" parent="1" vertex="1">
          <mxGeometry x="525" y="617" width="60" height="25" as="geometry"/>
        </mxCell>

        <!-- Legend Items Row 2 -->
        <mxCell id="legend-arrow1" value="" style="endArrow=classic;html=1;strokeWidth=2.5;strokeColor=#1976d2" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="100" y="660" as="sourcePoint"/>
            <mxPoint x="160" y="660" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="legend-arrow1-text" value="HTTP Request" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=10" parent="1" vertex="1">
          <mxGeometry x="170" y="652" width="90" height="20" as="geometry"/>
        </mxCell>

        <mxCell id="legend-arrow2" value="" style="endArrow=classic;html=1;strokeWidth=2.5;strokeColor=#388e3c" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="280" y="660" as="sourcePoint"/>
            <mxPoint x="340" y="660" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="legend-arrow2-text" value="JSON Response" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=10" parent="1" vertex="1">
          <mxGeometry x="350" y="652" width="100" height="20" as="geometry"/>
        </mxCell>

        <mxCell id="legend-arrow3" value="" style="endArrow=classic;html=1;strokeWidth=2.5;strokeColor=#7b1fa2" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="460" y="660" as="sourcePoint"/>
            <mxPoint x="520" y="660" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="legend-arrow3-text" value="DB Query" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=10" parent="1" vertex="1">
          <mxGeometry x="530" y="652" width="60" height="20" as="geometry"/>
        </mxCell>

        <!-- ==================== TECH STACK BOX ==================== -->
        <mxCell id="tech-box" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#90caf9;strokeWidth=1.5" parent="1" vertex="1">
          <mxGeometry x="610" y="580" width="550" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="tech-title" value="&lt;b&gt;Technology Stack&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="610" y="585" width="550" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="tech-content" value="&lt;table style='font-size:11px;'&gt;&lt;tr&gt;&lt;td&gt;&lt;b&gt;Frontend:&lt;/b&gt;&lt;/td&gt;&lt;td&gt;React 18, Vite, MUI (Material-UI), React Router DOM, Axios&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;b&gt;Backend:&lt;/b&gt;&lt;/td&gt;&lt;td&gt;Node.js 20, Express 4, Mongoose 8, JWT (jsonwebtoken), bcrypt&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;b&gt;Database:&lt;/b&gt;&lt;/td&gt;&lt;td&gt;MongoDB 7.0 (Atlas Cloud / Local)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;b&gt;API Format:&lt;/b&gt;&lt;/td&gt;&lt;td&gt;RESTful JSON, Stateless, JWT Bearer Token&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=15;spacingTop=5;" parent="1" vertex="1">
          <mxGeometry x="620" y="610" width="530" height="65" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
