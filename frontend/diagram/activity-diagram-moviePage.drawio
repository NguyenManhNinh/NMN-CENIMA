<mxfile host="app.diagrams.net">
  <diagram name="Activity Diagram - MoviePage" id="activity-movie-page">
    <mxGraphModel dx="1434" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="1200">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Title -->
        <mxCell id="title" value="Hình 3.x. Activity Diagram luồng xử lý MoviePage (xem phim đang chiếu)" style="text;html=1;align=center;verticalAlign=middle;rounded=0;fontSize=18;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="250" y="20" width="700" height="40" as="geometry"/>
        </mxCell>

        <!-- Subtitle -->
        <mxCell id="subtitle" value="NMN Cinema Website - Phân hệ 3" style="text;html=1;align=center;verticalAlign=middle;rounded=0;fontSize=14;fontStyle=2;fontColor=#666666" parent="1" vertex="1">
          <mxGeometry x="400" y="55" width="400" height="25" as="geometry"/>
        </mxCell>

        <!-- Swimlane Container -->
        <mxCell id="swimlane-container" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#666666;strokeWidth=1;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="100" width="1040" height="1050" as="geometry"/>
        </mxCell>

        <!-- User Swimlane Header -->
        <mxCell id="swimlane-user" value="&lt;b&gt;User (Browser)&lt;/b&gt;" style="swimlane;horizontal=1;startSize=30;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="100" y="120" width="300" height="1010" as="geometry"/>
        </mxCell>

        <!-- Frontend Swimlane Header -->
        <mxCell id="swimlane-frontend" value="&lt;b&gt;Frontend (React)&lt;/b&gt;" style="swimlane;horizontal=1;startSize=30;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="420" y="120" width="300" height="1010" as="geometry"/>
        </mxCell>

        <!-- Backend Swimlane Header -->
        <mxCell id="swimlane-backend" value="&lt;b&gt;Backend (API)&lt;/b&gt;" style="swimlane;horizontal=1;startSize=30;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="740" y="120" width="300" height="1010" as="geometry"/>
        </mxCell>

        <!-- START NODE -->
        <mxCell id="start" value="" style="ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="235" y="170" width="30" height="30" as="geometry"/>
        </mxCell>

        <!-- ACTION 1: User truy cập trang -->
        <mxCell id="action1" value="Truy cập&lt;br&gt;/phim-dang-chieu" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=#4fc3f7;strokeWidth=2;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="175" y="220" width="150" height="50" as="geometry"/>
        </mxCell>

        <!-- Arrow: Start -> Action1 -->
        <mxCell id="arrow-start-1" value="" style="endArrow=classic;html=1;strokeWidth=2" parent="1" source="start" target="action1" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ACTION 2: Hiển thị Loading Screen -->
        <mxCell id="action2" value="Hiển thị Loading Screen&lt;br&gt;(Logo + Spinner +&lt;br&gt;&quot;Chờ tôi xíu nhé&quot;)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#82b366;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="495" y="220" width="150" height="60" as="geometry"/>
        </mxCell>

        <!-- Arrow: Action1 -> Action2 -->
        <mxCell id="arrow-1-2" value="" style="endArrow=classic;html=1;strokeWidth=2" parent="1" source="action1" target="action2" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ACTION 3: Call API movies status=NOW -->
        <mxCell id="action3" value="Call API&lt;br&gt;GET /movies?status=NOW&amp;limit=50" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#82b366;strokeWidth=2;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="495" y="310" width="150" height="60" as="geometry"/>
        </mxCell>

        <!-- Arrow: Action2 -> Action3 -->
        <mxCell id="arrow-2-3" value="" style="endArrow=classic;html=1;strokeWidth=2" parent="1" source="action2" target="action3" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ACTION 4: Backend Query MongoDB -->
        <mxCell id="action4" value="Query MongoDB&lt;br&gt;find({status: 'NOW'})&lt;br&gt;.populate().limit(50)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff9c4;strokeColor=#d6b656;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="815" y="310" width="150" height="60" as="geometry"/>
        </mxCell>

        <!-- Arrow: Action3 -> Action4 -->
        <mxCell id="arrow-3-4" value="" style="endArrow=classic;html=1;strokeWidth=2" parent="1" source="action3" target="action4" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- DECISION 1: API thành công? -->
        <mxCell id="decision1" value="API&lt;br&gt;thành công?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="520" y="410" width="100" height="80" as="geometry"/>
        </mxCell>

        <!-- Arrow: Action4 -> Decision1 -->
        <mxCell id="arrow-4-d1" value="Response" style="endArrow=classic;html=1;strokeWidth=2" parent="1" source="action4" target="decision1" edge="1">
          <mxGeometry x="0.2" y="10" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>

        <!-- ACTION 5: Render danh sách phim (Success) -->
        <mxCell id="action5" value="setState(movies)&lt;br&gt;Render MovieCard Grid&lt;br&gt;(loading=false)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#82b366;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="495" y="520" width="150" height="60" as="geometry"/>
        </mxCell>

        <!-- Arrow: Decision1 -> Action5 (Yes) -->
        <mxCell id="arrow-d1-5" value="Có" style="endArrow=classic;html=1;strokeWidth=2;fontStyle=1;fontColor=#2e7d32" parent="1" source="decision1" target="action5" edge="1">
          <mxGeometry x="-0.2" y="-15" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>

        <!-- ACTION 5b: Error State -->
        <mxCell id="action5b" value="Hiển thị:&lt;br&gt;&quot;Hiện chưa có phim&quot;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcdd2;strokeColor=#e57373;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="815" y="440" width="150" height="50" as="geometry"/>
        </mxCell>

        <!-- Arrow: Decision1 -> Action5b (No) -->
        <mxCell id="arrow-d1-5b" value="Không" style="endArrow=classic;html=1;strokeWidth=2;fontStyle=1;fontColor=#c62828" parent="1" source="decision1" target="action5b" edge="1">
          <mxGeometry x="-0.2" y="10" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>

        <!-- End node for error -->
        <mxCell id="end-error" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="875" y="510" width="30" height="30" as="geometry"/>
        </mxCell>

        <!-- Arrow: Action5b -> End Error -->
        <mxCell id="arrow-5b-end" value="" style="endArrow=classic;html=1;strokeWidth=2" parent="1" source="action5b" target="end-error" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ACTION 6: User xem danh sách -->
        <mxCell id="action6" value="Xem danh sách phim&lt;br&gt;(MovieCard: poster,&lt;br&gt;rating, ageRating)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=#4fc3f7;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="175" y="520" width="150" height="60" as="geometry"/>
        </mxCell>

        <!-- Arrow: Action5 -> Action6 -->
        <mxCell id="arrow-5-6" value="" style="endArrow=classic;html=1;strokeWidth=2" parent="1" source="action5" target="action6" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- FORK NODE -->
        <mxCell id="fork1" value="" style="rhombus;whiteSpace=wrap;html=1;fillColor=#e1bee7;strokeColor=#8e24aa;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="215" y="620" width="70" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="fork1-label" value="Chọn&lt;br&gt;hành động" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=10;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="210" y="620" width="80" height="50" as="geometry"/>
        </mxCell>

        <!-- Arrow: Action6 -> Fork -->
        <mxCell id="arrow-6-fork" value="" style="endArrow=classic;html=1;strokeWidth=2" parent="1" source="action6" target="fork1" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ==================== BRANCH 1: Chuyển Tab ==================== -->
        <!-- DECISION 2: User chuyển tab? -->
        <mxCell id="decision2" value="Chuyển&lt;br&gt;tab?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1976d2;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="120" y="700" width="80" height="60" as="geometry"/>
        </mxCell>

        <!-- Arrow: Fork -> Decision2 -->
        <mxCell id="arrow-fork-d2" value="Tab" style="endArrow=classic;html=1;strokeWidth=2;fontStyle=2" parent="1" source="fork1" target="decision2" edge="1">
          <mxGeometry x="-0.3" y="-10" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>

        <!-- ACTION 7: Hiển thị Skeleton -->
        <mxCell id="action7" value="Hiển thị Skeleton&lt;br&gt;(tabLoading=true)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#82b366;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="495" y="700" width="150" height="50" as="geometry"/>
        </mxCell>

        <!-- Arrow: Decision2 -> Action7 (Yes) -->
        <mxCell id="arrow-d2-7" value="Có" style="endArrow=classic;html=1;strokeWidth=2;fontStyle=1;fontColor=#2e7d32" parent="1" source="decision2" target="action7" edge="1">
          <mxGeometry x="-0.3" y="10" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>

        <!-- ACTION 8: Call API status mới -->
        <mxCell id="action8" value="Call API status mới&lt;br&gt;(NOW ↔ COMING)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#82b366;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="495" y="780" width="150" height="50" as="geometry"/>
        </mxCell>

        <!-- Arrow: Action7 -> Action8 -->
        <mxCell id="arrow-7-8" value="" style="endArrow=classic;html=1;strokeWidth=2" parent="1" source="action7" target="action8" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ACTION 9: Backend Query mới -->
        <mxCell id="action9" value="Query MongoDB&lt;br&gt;find({status: NEW_STATUS})" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff9c4;strokeColor=#d6b656;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="815" y="780" width="150" height="50" as="geometry"/>
        </mxCell>

        <!-- Arrow: Action8 -> Action9 -->
        <mxCell id="arrow-8-9" value="" style="endArrow=classic;html=1;strokeWidth=2" parent="1" source="action8" target="action9" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ACTION 10: Cập nhật danh sách -->
        <mxCell id="action10" value="Cập nhật danh sách&lt;br&gt;(tabLoading=false)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#82b366;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="495" y="860" width="150" height="50" as="geometry"/>
        </mxCell>

        <!-- Arrow: Action9 -> Action10 -->
        <mxCell id="arrow-9-10" value="Response" style="endArrow=classic;html=1;strokeWidth=2" parent="1" source="action9" target="action10" edge="1">
          <mxGeometry x="0.2" y="10" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>

        <!-- Merge back to fork -->
        <mxCell id="merge1" value="" style="ellipse;html=1;shape=doubleEllipse;whiteSpace=wrap;fillColor=#e1bee7;strokeColor=#8e24aa;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="235" y="870" width="30" height="30" as="geometry"/>
        </mxCell>

        <!-- Arrow: Action10 -> Merge1 -->
        <mxCell id="arrow-10-merge" value="" style="endArrow=classic;html=1;strokeWidth=2" parent="1" source="action10" target="merge1" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Arrow: Merge1 -> Fork (loop back) -->
        <mxCell id="arrow-merge-fork" value="Quay lại" style="endArrow=classic;html=1;strokeWidth=2;curved=1;fontStyle=2" parent="1" source="merge1" target="fork1" edge="1">
          <mxGeometry x="0.3" y="20" relative="1" as="geometry">
            <mxPoint as="offset"/>
            <Array as="points">
              <mxPoint x="130" y="885"/>
              <mxPoint x="130" y="645"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- ==================== BRANCH 2: Xem Trailer ==================== -->
        <!-- DECISION 3: User bấm Trailer? -->
        <mxCell id="decision3" value="Xem&lt;br&gt;Trailer?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffe0b2;strokeColor=#ff9800;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="210" y="940" width="80" height="60" as="geometry"/>
        </mxCell>

        <!-- Arrow: Fork -> Decision3 -->
        <mxCell id="arrow-fork-d3" value="Trailer" style="endArrow=classic;html=1;strokeWidth=2;fontStyle=2" parent="1" source="fork1" target="decision3" edge="1">
          <mxGeometry x="-0.2" y="10" relative="1" as="geometry">
            <mxPoint as="offset"/>
            <Array as="points">
              <mxPoint x="250" y="940"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- ACTION 11: Mở Trailer Modal -->
        <mxCell id="action11" value="Mở TrailerModal&lt;br&gt;(trailerOpen=true)&lt;br&gt;YouTube Player" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#82b366;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="495" y="935" width="150" height="60" as="geometry"/>
        </mxCell>

        <!-- Arrow: Decision3 -> Action11 (Yes) -->
        <mxCell id="arrow-d3-11" value="Có" style="endArrow=classic;html=1;strokeWidth=2;fontStyle=1;fontColor=#2e7d32" parent="1" source="decision3" target="action11" edge="1">
          <mxGeometry x="-0.2" y="10" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>

        <!-- ACTION 12: Đóng Modal -->
        <mxCell id="action12" value="Đóng Modal&lt;br&gt;(Click X hoặc overlay)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=#4fc3f7;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="175" y="1020" width="150" height="50" as="geometry"/>
        </mxCell>

        <!-- Arrow: Action11 -> Action12 -->
        <mxCell id="arrow-11-12" value="" style="endArrow=classic;html=1;strokeWidth=2" parent="1" source="action11" target="action12" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Arrow: Action12 -> Fork (loop back) -->
        <mxCell id="arrow-12-fork" value="Quay lại" style="endArrow=classic;html=1;strokeWidth=2;curved=1;fontStyle=2" parent="1" source="action12" target="fork1" edge="1">
          <mxGeometry x="0.5" y="-20" relative="1" as="geometry">
            <mxPoint as="offset"/>
            <Array as="points">
              <mxPoint x="110" y="1045"/>
              <mxPoint x="110" y="645"/>
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- ==================== BRANCH 3: Đặt vé ==================== -->
        <!-- DECISION 4: User đặt vé? -->
        <mxCell id="decision4" value="Đặt vé?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#c5e1a5;strokeColor=#7cb342;strokeWidth=2" parent="1" vertex="1">
          <mxGeometry x="305" y="700" width="80" height="60" as="geometry"/>
        </mxCell>

        <!-- Arrow: Fork -> Decision4 -->
        <mxCell id="arrow-fork-d4" value="Mua vé" style="endArrow=classic;html=1;strokeWidth=2;fontStyle=2" parent="1" source="fork1" target="decision4" edge="1">
          <mxGeometry x="-0.3" y="10" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>

        <!-- ACTION 13: Navigate to Booking -->
        <mxCell id="action13" value="Navigate to&lt;br&gt;/dat-ve/{movieId}" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#82b366;strokeWidth=2;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="495" y="605" width="150" height="50" as="geometry"/>
        </mxCell>

        <!-- Arrow: Decision4 -> Action13 (Yes) -->
        <mxCell id="arrow-d4-13" value="Có" style="endArrow=classic;html=1;strokeWidth=2;fontStyle=1;fontColor=#2e7d32" parent="1" source="decision4" target="action13" edge="1">
          <mxGeometry x="-0.3" y="10" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>

        <!-- END NODE (Success - Booking) -->
        <mxCell id="end-success" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="875" y="615" width="30" height="30" as="geometry"/>
        </mxCell>

        <!-- Arrow: Action13 -> End Success -->
        <mxCell id="arrow-13-end" value="→ BookingPage" style="endArrow=classic;html=1;strokeWidth=2;fontStyle=2" parent="1" source="action13" target="end-success" edge="1">
          <mxGeometry x="-0.2" y="10" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>

        <!-- ==================== LEGEND ==================== -->
        <mxCell id="legend-box" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=1.5" parent="1" vertex="1">
          <mxGeometry x="1140" y="120" width="240" height="320" as="geometry"/>
        </mxCell>

        <mxCell id="legend-title" value="&lt;b&gt;Chú thích (Legend)&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="1140" y="125" width="240" height="30" as="geometry"/>
        </mxCell>

        <!-- Legend: Start -->
        <mxCell id="legend-start" value="" style="ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="1160" y="165" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-start-text" value="Start (Bắt đầu)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="1190" y="160" width="180" height="30" as="geometry"/>
        </mxCell>

        <!-- Legend: End -->
        <mxCell id="legend-end" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="1160" y="200" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-end-text" value="End (Kết thúc)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="1190" y="195" width="180" height="30" as="geometry"/>
        </mxCell>

        <!-- Legend: Action -->
        <mxCell id="legend-action" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#82b366;strokeWidth=1.5" parent="1" vertex="1">
          <mxGeometry x="1160" y="235" width="30" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-action-text" value="Action (Hành động)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="1200" y="230" width="170" height="30" as="geometry"/>
        </mxCell>

        <!-- Legend: Decision -->
        <mxCell id="legend-decision" value="" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=1.5" parent="1" vertex="1">
          <mxGeometry x="1155" y="265" width="40" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="legend-decision-text" value="Decision (Quyết định)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="1200" y="265" width="170" height="30" as="geometry"/>
        </mxCell>

        <!-- Legend: Swimlane Colors -->
        <mxCell id="legend-user-color" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=1.5" parent="1" vertex="1">
          <mxGeometry x="1160" y="305" width="30" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-user-text" value="User (Browser)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="1200" y="300" width="170" height="30" as="geometry"/>
        </mxCell>

        <mxCell id="legend-fe-color" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=1.5" parent="1" vertex="1">
          <mxGeometry x="1160" y="335" width="30" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-fe-text" value="Frontend (React)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="1200" y="330" width="170" height="30" as="geometry"/>
        </mxCell>

        <mxCell id="legend-be-color" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=1.5" parent="1" vertex="1">
          <mxGeometry x="1160" y="365" width="30" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-be-text" value="Backend (API)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="1200" y="360" width="170" height="30" as="geometry"/>
        </mxCell>

        <!-- Legend: Flow note -->
        <mxCell id="legend-note" value="&lt;i&gt;Mũi tên cong = Quay lại&lt;br&gt;vòng lặp chọn hành động&lt;/i&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1140" y="395" width="240" height="40" as="geometry"/>
        </mxCell>

        <!-- Flow Summary Box -->
        <mxCell id="summary-box" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#90caf9;strokeWidth=1.5" parent="1" vertex="1">
          <mxGeometry x="1140" y="460" width="240" height="180" as="geometry"/>
        </mxCell>

        <mxCell id="summary-title" value="&lt;b&gt;Luồng xử lý chính&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="1140" y="465" width="240" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="summary-content" value="1. Truy cập → Loading&lt;br&gt;2. Call API status=NOW&lt;br&gt;3. Render MovieCard Grid&lt;br&gt;4. User chọn:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;a) Chuyển tab → Skeleton&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;b) Xem trailer → Modal&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;c) Đặt vé → BookingPage&lt;br&gt;5. Loop hoặc End" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=11;spacingLeft=10;spacingTop=5;" parent="1" vertex="1">
          <mxGeometry x="1145" y="490" width="230" height="145" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
