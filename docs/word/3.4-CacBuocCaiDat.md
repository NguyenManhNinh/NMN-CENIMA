# 3.4. Các bước cài đặt

## 3.4.1. Yêu cầu hệ thống

| Thành phần | Phiên bản |
|:-----------|:----------|
| Node.js | 18.x trở lên |
| MongoDB | 7.x |
| Redis | 7.x |
| Docker (tùy chọn) | 24.x |

---

## 3.4.2. Cài đặt thủ công

### Backend

```bash
# 1. Di chuyển vào thư mục backend
cd backend

# 2. Cài đặt dependencies
npm install

# 3. Tạo file .env từ mẫu
cp .env.example .env
# Chỉnh sửa các biến: MONGO_URI, JWT_SECRET, VNP_*, SMTP_*

# 4. Chạy server development
npm run dev
# Server chạy tại http://localhost:5000
```

**Các thư viện chính:**
- Express 4.21, Mongoose 8.8 (MongoDB ODM)
- JWT, bcrypt (Xác thực)
- VNPay SDK, QRCode (Thanh toán, vé)
- Socket.io, Redis (Real-time, cache)
- Nodemailer (Gửi email)

### Frontend

```bash
# 1. Di chuyển vào thư mục frontend
cd frontend

# 2. Cài đặt dependencies
npm install

# 3. Chạy development server
npm run dev
# App chạy tại http://localhost:3000
```

**Các thư viện chính:**
- React 18.2, Vite 5.2
- Material-UI 5.15 (UI Components)
- Redux Toolkit (State management)
- React Router 6.22 (Routing)
- Axios (HTTP client)

---

## 3.4.3. Cài đặt với Docker

```bash
# 1. Di chuyển vào thư mục backend
cd backend

# 2. Tạo file .env
cp .env.example .env

# 3. Khởi động toàn bộ services
docker-compose up -d

# Kết quả:
# - Backend API: http://localhost:5000
# - MongoDB: localhost:27018
# - Redis: localhost:6379
```

**Services trong docker-compose:**

| Service | Image | Port |
|:--------|:------|:-----|
| backend | Node 18 Alpine | 5000 |
| mongo | MongoDB 7 | 27018 |
| redis | Redis 7 Alpine | 6379 |

---

## 3.4.4. Biến môi trường quan trọng

| Biến | Mô tả |
|:-----|:------|
| `MONGO_URI` | Connection string MongoDB |
| `JWT_SECRET` | Secret key cho JWT |
| `VNP_TMN_CODE` | Mã merchant VNPay |
| `VNP_HASH_SECRET` | Secret key VNPay |
| `SMTP_HOST` | SMTP server gửi email |
| `REDIS_URL` | Connection string Redis |
