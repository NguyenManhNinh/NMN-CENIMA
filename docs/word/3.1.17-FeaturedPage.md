## 3.1.17. Phân tích yêu cầu phân hệ 14: Danh sách Phim Hay (FeaturedPage)

### 3.1.17.1. Mục tiêu và phạm vi phân hệ

Phân hệ FeaturedPage là trang hiển thị danh sách các bài viết "Phim Hay Tháng" - giới thiệu những bộ phim nổi bật, đáng xem trong tháng. Đây là chức năng content marketing giúp người dùng khám phá các tựa phim hay thông qua các bài review, giới thiệu từ đội ngũ biên tập của rạp.

Phạm vi phân hệ bao gồm:
- Hiển thị danh sách bài viết theo dạng card với thumbnail, tiêu đề, mô tả ngắn, lượt xem, lượt thích
- Sắp xếp theo: mới nhất, phổ biến nhất, được thích nhiều nhất
- Phân trang với số trang điều hướng
- Tương tác thích/bỏ thích bài viết (yêu cầu đăng nhập)
- Sidebar hiển thị phim đang chiếu
- Điều hướng đến trang chi tiết bài viết
- Responsive layout cho desktop và mobile

### 3.1.17.2. Tác nhân và quyền hạn

| Tác nhân | Quyền hạn |
|:---------|:----------|
| Guest (khách) | Xem danh sách bài viết, sắp xếp, phân trang, xem chi tiết bài viết |
| User (thành viên) | Tất cả quyền của Guest + thích/bỏ thích bài viết |

### 3.1.17.3. Yêu cầu chức năng (FR) – FeaturedPage

| ID | Yêu cầu | Mô tả | Ưu tiên |
|:---|:--------|:------|:--------|
| FR-FT-01 | Hiển thị danh sách bài viết | Render danh sách bài viết dạng card: thumbnail (16:9), tiêu đề, excerpt, lượt xem, lượt thích, ngày tạo | Cao |
| FR-FT-02 | Sắp xếp danh sách | Sắp xếp theo: mới nhất (-createdAt), phổ biến (-viewCount), thích nhiều (-likeCount) | Cao |
| FR-FT-03 | Phân trang | Hiển thị 10 bài viết/trang với navigation số trang | Cao |
| FR-FT-04 | Thích bài viết | User có thể toggle like, cập nhật số lượt thích realtime (yêu cầu đăng nhập) | Cao |
| FR-FT-05 | Hiển thị lượt xem | Hiển thị viewCount với format số rút gọn (1K, 1M) | Trung bình |
| FR-FT-06 | Điều hướng chi tiết | Click vào bài viết để xem trang chi tiết (/phim-hay/:slug) | Cao |
| FR-FT-07 | Sidebar phim đang chiếu | Hiển thị danh sách phim đang chiếu ở sidebar phải | Trung bình |
| FR-FT-08 | Loading State | Hiển thị skeleton loading khi tải dữ liệu | Cao |
| FR-FT-09 | URL State Sync | Bộ lọc và trang hiện tại được lưu trong URL params | Trung bình |
| FR-FT-10 | Hiển thị ngày tạo | Format ngày theo định dạng Việt Nam (dd/MM/yyyy) | Thấp |

### 3.1.17.4. Yêu cầu phi chức năng (NFR)

| ID | Yêu cầu | Mô tả |
|:---|:--------|:------|
| NFR-FT-01 | Hiệu năng | Trang load < 3 giây, API response < 500ms |
| NFR-FT-02 | Responsive | Hỗ trợ desktop và mobile, layout grid co giãn theo breakpoint |
| NFR-FT-03 | UX Optimistic | Cập nhật UI ngay khi thích/bỏ thích, rollback nếu API lỗi |
| NFR-FT-04 | Tương thích | Hoạt động tốt trên Chrome, Firefox, Safari, Edge phiên bản mới nhất |
| NFR-FT-05 | Khả dụng | Có fallback khi API lỗi, hiển thị thông báo lỗi thân thiện |
| NFR-FT-06 | Lazy Loading | Ảnh thumbnail sử dụng lazy loading để tối ưu hiệu năng |

### 3.1.17.5. Quy tắc nghiệp vụ

- **BR-FT-01 (Chỉ hiển thị bài published):** Danh sách chỉ hiển thị các bài viết có status = 'published'.

- **BR-FT-02 (Like yêu cầu đăng nhập):** Tính năng thích bài viết yêu cầu user phải đăng nhập. Guest click like sẽ được redirect đến trang đăng nhập.

- **BR-FT-03 (Optimistic Update Like):** Khi thích/bỏ thích, UI cập nhật ngay lập tức trước khi API trả về. Rollback nếu API lỗi.

- **BR-FT-04 (Like state tracking):** User đã like được lưu trong array likedBy của FeaturedArticle. Frontend check isLiked dựa trên userId có trong likedBy.

- **BR-FT-05 (Fallback ảnh):** Khi ảnh thumbnail lỗi, hiển thị ảnh fallback SVG placeholder.

- **BR-FT-06 (Sort default):** Mặc định sắp xếp theo ngày tạo mới nhất (-createdAt).

---

*Phần phân tích yêu cầu trên đây là cơ sở để thiết kế kiến trúc hệ thống, sơ đồ Use Case, Activity Diagram, Sequence Diagram và Class Diagram trong mục 3.2 tiếp theo.*
