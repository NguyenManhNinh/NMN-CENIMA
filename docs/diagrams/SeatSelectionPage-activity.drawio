<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2026-01-06T02:10:00.000Z" agent="Mozilla/5.0" version="21.0.0" type="device">
  <diagram name="SeatSelectionActivity" id="seat-activity">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Start Node -->
        <mxCell id="start" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#1a1a2e;" vertex="1" parent="1">
          <mxGeometry x="380" y="40" width="30" height="30" as="geometry" />
        </mxCell>

        <!-- Access Page -->
        <mxCell id="act1" value="Truy cập /chon-ghe/{showtimeId}" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="295" y="100" width="200" height="40" as="geometry" />
        </mxCell>

        <!-- Fetch Data -->
        <mxCell id="act2" value="GET showtime + seatMap&#xa;+ bookedSeats + seatHolds" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="295" y="170" width="200" height="40" as="geometry" />
        </mxCell>

        <!-- Decision: Showtime exists? -->
        <mxCell id="dec1" value="Showtime&#xa;tồn tại?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="340" y="240" width="110" height="60" as="geometry" />
        </mxCell>

        <!-- Render Seat Map & Countdown -->
        <mxCell id="act3" value="Render sơ đồ ghế&#xa;+ start countdown" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="295" y="340" width="200" height="40" as="geometry" />
        </mxCell>

        <!-- 404 Error -->
        <mxCell id="err404" value="Hiển thị 404/Lỗi" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="500" y="250" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="stop_err" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#1a1a2e;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="650" y="255" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="stop_err_border" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=none;strokeColor=#1a1a2e;" vertex="1" parent="1">
          <mxGeometry x="647" y="252" width="26" height="26" as="geometry" />
        </mxCell>

        <!-- Loop: Time Check -->
        <mxCell id="dec_timer" value="Chưa hết&#xa;giờ giữ ghế?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="340" y="420" width="110" height="60" as="geometry" />
        </mxCell>

        <!-- User Action Split -->
        <mxCell id="split_action" value="" style="shape=line;html=1;strokeWidth=4;rotation=0;" vertex="1" parent="1">
          <mxGeometry x="245" y="520" width="300" height="10" as="geometry" />
        </mxCell>

        <!-- User Click Seat -->
        <mxCell id="dec_click" value="User click&#xa;ghế?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="220" y="550" width="100" height="50" as="geometry" />
        </mxCell>

        <!-- User Click Continue -->
        <mxCell id="dec_continue" value="User bấm&#xa;&quot;Tiếp tục&quot;?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="470" y="550" width="100" height="50" as="geometry" />
        </mxCell>

        <!-- Seat Status Check -->
        <mxCell id="dec_seat_status" value="Ghế đang&#xa;trống?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="220" y="630" width="100" height="50" as="geometry" />
        </mxCell>

        <!-- POST Hold -->
        <mxCell id="act_hold" value="POST /seat-holds" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="140" y="700" width="120" height="30" as="geometry" />
        </mxCell>

        <!-- DELETE Hold -->
        <mxCell id="act_release" value="DELETE /seat-holds" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="290" y="700" width="120" height="30" as="geometry" />
        </mxCell>

        <!-- Update UI -->
        <mxCell id="act_update_ui" value="Cập nhật UI ghế" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="210" y="760" width="120" height="30" as="geometry" />
        </mxCell>

        <!-- Validate Selection -->
        <mxCell id="dec_validate" value="Có ghế đã&#xa;chọn?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="470" y="630" width="100" height="50" as="geometry" />
        </mxCell>

        <!-- Navigate Combo -->
        <mxCell id="act_nav_combo" value="Navigate /dat-ve-combo" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="580" y="700" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="stop_success" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#1a1a2e;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="640" y="750" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="stop_success_border" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=none;strokeColor=#1a1a2e;" vertex="1" parent="1">
          <mxGeometry x="637" y="747" width="26" height="26" as="geometry" />
        </mxCell>

        <!-- Warning Toast -->
        <mxCell id="act_warning" value="Thông báo&#xa;&quot;Chọn ghế trước&quot;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="440" y="700" width="120" height="30" as="geometry" />
        </mxCell>

        <!-- Timeout Handling -->
        <mxCell id="act_timeout" value="Hết thời gian&#xa;Thông báo + Kết thúc" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="500" y="430" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="stop_timeout" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#1a1a2e;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="660" y="440" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="stop_timeout_border" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=none;strokeColor=#1a1a2e;" vertex="1" parent="1">
          <mxGeometry x="657" y="437" width="26" height="26" as="geometry" />
        </mxCell>

        <!-- Connectors -->
        <mxCell id="c1" edge="1" parent="1" source="start" target="act1"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="c2" edge="1" parent="1" source="act1" target="act2"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="c3" edge="1" parent="1" source="act2" target="dec1"><mxGeometry relative="1" as="geometry"/></mxCell>

        <!-- Showtime Exists: Yes -->
        <mxCell id="c4" value="Có" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="dec1" target="act3"><mxGeometry relative="1" as="geometry"/></mxCell>

        <!-- Showtime Exists: No -->
        <mxCell id="c5" value="Không" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="dec1" target="err404"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="c6" edge="1" parent="1" source="err404" target="stop_err"><mxGeometry relative="1" as="geometry"/></mxCell>

        <!-- Countdown Loop -->
        <mxCell id="c7" edge="1" parent="1" source="act3" target="dec_timer"><mxGeometry relative="1" as="geometry"/></mxCell>

        <!-- Timer Check: Yes -->
        <mxCell id="c8" value="Yes" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="dec_timer" target="split_action"><mxGeometry relative="1" as="geometry"/></mxCell>

        <!-- Timer Check: No -->
        <mxCell id="c9" value="No" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="dec_timer" target="act_timeout"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="c10" edge="1" parent="1" source="act_timeout" target="stop_timeout"><mxGeometry relative="1" as="geometry"/></mxCell>

        <!-- Event Handling -->
        <mxCell id="c11" edge="1" parent="1" source="split_action" target="dec_click"><mxGeometry relative="1" as="geometry"><mxPoint x="270" y="530" as="sourcePoint"/></mxGeometry></mxCell>
        <mxCell id="c12" edge="1" parent="1" source="split_action" target="dec_continue"><mxGeometry relative="1" as="geometry"><mxPoint x="520" y="530" as="sourcePoint"/></mxGeometry></mxCell>

        <!-- Click Handling -->
        <mxCell id="c13" value="Có" edge="1" parent="1" source="dec_click" target="dec_seat_status"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="c14" value="Trống" edge="1" parent="1" source="dec_seat_status" target="act_hold"><mxGeometry relative="1" as="geometry"><mxPoint as="offset" /></mxGeometry></mxCell>
        <mxCell id="c15" value="Đã chọn" edge="1" parent="1" source="dec_seat_status" target="act_release"><mxGeometry relative="1" as="geometry"><mxPoint as="offset" /></mxGeometry></mxCell>

        <!-- Update UI Loop Back -->
        <mxCell id="c16" edge="1" parent="1" source="act_hold" target="act_update_ui"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="c17" edge="1" parent="1" source="act_release" target="act_update_ui"><mxGeometry relative="1" as="geometry"/></mxCell>

        <!-- Loop back to timer check -->
        <mxCell id="c18" style="edgeStyle=orthogonalEdgeStyle;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="act_update_ui" target="dec_timer">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="100" y="775" />
              <mxPoint x="100" y="450" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Continue Handling -->
        <mxCell id="c19" value="Có" edge="1" parent="1" source="dec_continue" target="dec_validate"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="c20" value="Có" edge="1" parent="1" source="dec_validate" target="act_nav_combo"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="c21" value="Không" edge="1" parent="1" source="dec_validate" target="act_warning"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="c22" edge="1" parent="1" source="act_nav_combo" target="stop_success"><mxGeometry relative="1" as="geometry"/></mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
