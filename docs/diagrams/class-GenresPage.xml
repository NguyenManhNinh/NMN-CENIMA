<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2026-01-13T07:01:07.000Z" agent="Mozilla/5.0" version="22.1.0" type="device">
  <diagram name="Class Diagram - GenresPage" id="class-genres-page">
    <mxGraphModel dx="1434" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="&lt;b&gt;CLASS DIAGRAM RÚT GỌN - PHÂN HỆ GENRESPAGE&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="350" y="10" width="400" height="30" as="geometry" />
        </mxCell>

        <!-- ==================== FRONTEND LAYER ==================== -->
        <mxCell id="frontend-layer" value="&lt;b&gt;FRONTEND LAYER (ReactJS)&lt;/b&gt;" style="swimlane;horizontal=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;startSize=25;" vertex="1" parent="1">
          <mxGeometry x="40" y="50" width="450" height="350" as="geometry" />
        </mxCell>

        <!-- GenresPage Component -->
        <mxCell id="genres-page-class" value="&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;&#39;&gt;&lt;b&gt;GenresPage&lt;/b&gt;&lt;/p&gt;&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;font-size:10px;color:#666;&#39;&gt;&amp;lt;&amp;lt;React Component&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#39;1&#39;&gt;&lt;p style=&#39;margin:0px;margin-left:4px;font-size:11px;&#39;&gt;&lt;b&gt;State:&lt;/b&gt;&lt;br&gt;- genres: Genre[]&lt;br&gt;- movies: Movie[]&lt;br&gt;- categories: Category[]&lt;br&gt;- currentPage: number&lt;br&gt;- totalPages: number&lt;br&gt;- filters: FilterParams&lt;br&gt;- loading: boolean&lt;/p&gt;&lt;hr size=&#39;1&#39;&gt;&lt;p style=&#39;margin:0px;margin-left:4px;font-size:11px;&#39;&gt;&lt;b&gt;Methods:&lt;/b&gt;&lt;br&gt;+ fetchGenresData(): void&lt;br&gt;+ fetchCategories(): void&lt;br&gt;+ handleToggleLike(genreId): void&lt;br&gt;+ handlePageChange(page): void&lt;br&gt;+ handleFilterChange(filter): void&lt;br&gt;+ resetFilters(): void&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="frontend-layer">
          <mxGeometry x="20" y="40" width="200" height="290" as="geometry" />
        </mxCell>

        <!-- genreApi.js -->
        <mxCell id="genre-api-class" value="&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;&#39;&gt;&lt;b&gt;genreApi.js&lt;/b&gt;&lt;/p&gt;&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;font-size:10px;color:#666;&#39;&gt;&amp;lt;&amp;lt;API Client&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#39;1&#39;&gt;&lt;p style=&#39;margin:0px;margin-left:4px;font-size:11px;&#39;&gt;&lt;b&gt;Functions:&lt;/b&gt;&lt;br&gt;+ getAllGenresAPI(params): Promise&lt;br&gt;+ getCategoriesAPI(): Promise&lt;br&gt;+ getCountriesAPI(): Promise&lt;br&gt;+ getYearsAPI(): Promise&lt;br&gt;+ toggleGenreLikeAPI(id): Promise&lt;br&gt;+ getGenreLikeStatusAPI(id): Promise&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="frontend-layer">
          <mxGeometry x="250" y="80" width="180" height="170" as="geometry" />
        </mxCell>

        <!-- ==================== BACKEND LAYER ==================== -->
        <mxCell id="backend-layer" value="&lt;b&gt;BACKEND LAYER (Node.js/Express)&lt;/b&gt;" style="swimlane;horizontal=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;startSize=25;" vertex="1" parent="1">
          <mxGeometry x="520" y="50" width="480" height="350" as="geometry" />
        </mxCell>

        <!-- GenreController -->
        <mxCell id="genre-controller-class" value="&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;&#39;&gt;&lt;b&gt;GenreController&lt;/b&gt;&lt;/p&gt;&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;font-size:10px;color:#666;&#39;&gt;&amp;lt;&amp;lt;Controller&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#39;1&#39;&gt;&lt;p style=&#39;margin:0px;margin-left:4px;font-size:11px;&#39;&gt;&lt;b&gt;Methods:&lt;/b&gt;&lt;br&gt;+ getAllGenres(req, res)&lt;br&gt;+ getGenreBySlug(req, res)&lt;br&gt;+ toggleLike(req, res)&lt;br&gt;+ getCategories(req, res)&lt;br&gt;+ getCountries(req, res)&lt;br&gt;+ getYears(req, res)&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="backend-layer">
          <mxGeometry x="20" y="40" width="170" height="150" as="geometry" />
        </mxCell>

        <!-- GenreService -->
        <mxCell id="genre-service-class" value="&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;&#39;&gt;&lt;b&gt;GenreService&lt;/b&gt;&lt;/p&gt;&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;font-size:10px;color:#666;&#39;&gt;&amp;lt;&amp;lt;Service&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#39;1&#39;&gt;&lt;p style=&#39;margin:0px;margin-left:4px;font-size:11px;&#39;&gt;&lt;b&gt;Methods:&lt;/b&gt;&lt;br&gt;+ getGenres(filters, pagination)&lt;br&gt;+ getGenreBySlug(slug)&lt;br&gt;+ toggleLike(userId, genreId)&lt;br&gt;+ buildFilterQuery(params)&lt;br&gt;+ getDistinctValues(field)&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="backend-layer">
          <mxGeometry x="20" y="210" width="180" height="130" as="geometry" />
        </mxCell>

        <!-- GenreRepository (Model) -->
        <mxCell id="genre-repo-class" value="&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;&#39;&gt;&lt;b&gt;Genre&lt;/b&gt;&lt;/p&gt;&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;font-size:10px;color:#666;&#39;&gt;&amp;lt;&amp;lt;Mongoose Model&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#39;1&#39;&gt;&lt;p style=&#39;margin:0px;margin-left:4px;font-size:11px;&#39;&gt;&lt;b&gt;Static Methods:&lt;/b&gt;&lt;br&gt;+ find(query, options)&lt;br&gt;+ findOne(query)&lt;br&gt;+ findByIdAndUpdate(id, update)&lt;br&gt;+ aggregate(pipeline)&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="backend-layer">
          <mxGeometry x="280" y="210" width="180" height="130" as="geometry" />
        </mxCell>

        <!-- ==================== ENTITY LAYER ==================== -->
        <mxCell id="entity-layer" value="&lt;b&gt;ENTITY / DATA MODEL (MongoDB)&lt;/b&gt;" style="swimlane;horizontal=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;startSize=25;" vertex="1" parent="1">
          <mxGeometry x="40" y="420" width="960" height="260" as="geometry" />
        </mxCell>

        <!-- Genre Entity -->
        <mxCell id="genre-entity" value="&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;&#39;&gt;&lt;b&gt;Genre&lt;/b&gt;&lt;/p&gt;&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;font-size:10px;color:#666;&#39;&gt;&amp;lt;&amp;lt;Entity&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#39;1&#39;&gt;&lt;p style=&#39;margin:0px;margin-left:4px;font-size:11px;&#39;&gt;&lt;b&gt;Attributes:&lt;/b&gt;&lt;br&gt;- _id: ObjectId &amp;lt;PK&amp;gt;&lt;br&gt;- name: String&lt;br&gt;- slug: String &amp;lt;unique&amp;gt;&lt;br&gt;- content: String (HTML)&lt;br&gt;- thumbnail: String (URL)&lt;br&gt;- images: [String]&lt;br&gt;- trailerUrl: String&lt;br&gt;- views: Number (default: 0)&lt;br&gt;- likeCount: Number (default: 0)&lt;br&gt;- likedBy: [ObjectId] &amp;lt;ref User&amp;gt;&lt;br&gt;- categoryId: ObjectId &amp;lt;ref Category&amp;gt;&lt;br&gt;- country: String&lt;br&gt;- year: Number&lt;br&gt;- createdAt: Date&lt;br&gt;- updatedAt: Date&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="entity-layer">
          <mxGeometry x="20" y="35" width="200" height="210" as="geometry" />
        </mxCell>

        <!-- Category Entity -->
        <mxCell id="category-entity" value="&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;&#39;&gt;&lt;b&gt;Category&lt;/b&gt;&lt;/p&gt;&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;font-size:10px;color:#666;&#39;&gt;&amp;lt;&amp;lt;Entity&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#39;1&#39;&gt;&lt;p style=&#39;margin:0px;margin-left:4px;font-size:11px;&#39;&gt;&lt;b&gt;Attributes:&lt;/b&gt;&lt;br&gt;- _id: ObjectId &amp;lt;PK&amp;gt;&lt;br&gt;- name: String&lt;br&gt;- slug: String &amp;lt;unique&amp;gt;&lt;br&gt;- description: String&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="entity-layer">
          <mxGeometry x="260" y="35" width="170" height="120" as="geometry" />
        </mxCell>

        <!-- User Entity (partial) -->
        <mxCell id="user-entity" value="&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;&#39;&gt;&lt;b&gt;User&lt;/b&gt;&lt;/p&gt;&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;font-size:10px;color:#666;&#39;&gt;&amp;lt;&amp;lt;Entity - partial&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#39;1&#39;&gt;&lt;p style=&#39;margin:0px;margin-left:4px;font-size:11px;&#39;&gt;&lt;b&gt;Attributes:&lt;/b&gt;&lt;br&gt;- _id: ObjectId &amp;lt;PK&amp;gt;&lt;br&gt;- name: String&lt;br&gt;- email: String&lt;br&gt;- avatar: String&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="entity-layer">
          <mxGeometry x="470" y="35" width="160" height="110" as="geometry" />
        </mxCell>

        <!-- Movie Entity (partial) -->
        <mxCell id="movie-entity" value="&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;&#39;&gt;&lt;b&gt;Movie&lt;/b&gt;&lt;/p&gt;&lt;p style=&#39;margin:0px;margin-top:4px;text-align:center;font-size:10px;color:#666;&#39;&gt;&amp;lt;&amp;lt;Entity - sidebar&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#39;1&#39;&gt;&lt;p style=&#39;margin:0px;margin-left:4px;font-size:11px;&#39;&gt;&lt;b&gt;Attributes:&lt;/b&gt;&lt;br&gt;- _id: ObjectId&lt;br&gt;- title: String&lt;br&gt;- poster: String&lt;br&gt;- status: String&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="entity-layer">
          <mxGeometry x="670" y="35" width="150" height="110" as="geometry" />
        </mxCell>

        <!-- ==================== RELATIONSHIPS ==================== -->
        <!-- GenresPage depends on genreApi -->
        <mxCell id="rel1" value="&amp;lt;&amp;lt;uses&amp;gt;&amp;gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="genres-page-class" target="genre-api-class">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="260" y="250" as="sourcePoint" />
            <mxPoint x="420" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- genreApi communicates with GenreController -->
        <mxCell id="rel2" value="&amp;lt;&amp;lt;HTTP/REST&amp;gt;&amp;gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#1a5276;strokeWidth=2;" edge="1" parent="1" source="genre-api-class" target="genre-controller-class">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="470" y="210" as="sourcePoint" />
            <mxPoint x="520" y="210" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- GenreController uses GenreService -->
        <mxCell id="rel3" value="&amp;lt;&amp;lt;uses&amp;gt;&amp;gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="genre-controller-class" target="genre-service-class">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="625" y="200" as="sourcePoint" />
            <mxPoint x="625" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- GenreService uses Genre Model -->
        <mxCell id="rel4" value="&amp;lt;&amp;lt;queries&amp;gt;&amp;gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="genre-service-class" target="genre-repo-class">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="720" y="310" as="sourcePoint" />
            <mxPoint x="800" y="310" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Genre Model manages Genre Entity -->
        <mxCell id="rel5" value="&amp;lt;&amp;lt;maps to&amp;gt;&amp;gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="genre-repo-class" target="genre-entity">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="890" y="400" as="sourcePoint" />
            <mxPoint x="160" y="450" as="targetPoint" />
            <Array as="points">
              <mxPoint x="890" y="410" />
              <mxPoint x="160" y="410" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Genre has Category (reference) -->
        <mxCell id="rel6" value="1" style="endArrow=none;html=1;rounded=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=diamondThin;startFill=0;startSize=12;" edge="1" parent="1" source="genre-entity" target="category-entity">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="280" y="520" as="sourcePoint" />
            <mxPoint x="300" y="520" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="rel6-label" value="categoryId" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="265" y="485" width="55" height="15" as="geometry" />
        </mxCell>

        <!-- Genre has Users (likedBy) -->
        <mxCell id="rel7" value="*" style="endArrow=none;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=diamondThin;startFill=0;startSize=12;" edge="1" parent="1" source="genre-entity" target="user-entity">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="280" y="560" as="sourcePoint" />
            <mxPoint x="470" y="560" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="rel7-label" value="likedBy" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="380" y="545" width="45" height="15" as="geometry" />
        </mxCell>

        <!-- Caption -->
        <mxCell id="caption" value="&lt;i&gt;Hình 3.xx. Sơ đồ Class Diagram rút gọn – Phân hệ GenresPage&lt;/i&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="350" y="700" width="350" height="20" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
