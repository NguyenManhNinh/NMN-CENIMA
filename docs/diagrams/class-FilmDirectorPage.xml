<mxfile host="app.diagrams.net" modified="2026-01-21T03:45:00.000Z" agent="Mozilla/5.0" version="21.0.0">
  <diagram name="Class Diagram - FilmDirectorPage" id="class-filmdirectorpage">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="&lt;b&gt;Hình 3.51. Sơ đồ Class Diagram rút gọn – FilmDirectorPage&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="350" y="15" width="400" height="30" as="geometry" />
        </mxCell>

        <!-- ========== FRONTEND LAYER ========== -->
        <mxCell id="frontend-layer" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=#01579b;strokeWidth=2;dashed=1;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="40" y="55" width="520" height="450" as="geometry" />
        </mxCell>
        <mxCell id="frontend-label" value="&lt;b&gt;FRONTEND LAYER (ReactJS)&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#e1f5fe;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#01579b;" vertex="1" parent="1">
          <mxGeometry x="40" y="55" width="200" height="25" as="geometry" />
        </mxCell>

        <!-- FilmDirectorPage Component -->
        <mxCell id="component" value="&lt;&lt;component&gt;&gt;&#xa;&lt;b&gt;FilmDirectorPage&lt;/b&gt;" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=40;fillColor=#fff2cc;strokeColor=#d6b656;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="60" y="95" width="200" height="250" as="geometry" />
        </mxCell>
        <mxCell id="comp-attr" value="- directors: Array&#xa;- nationalityOptions: Array&#xa;- sidebarMovies: Array&#xa;- selectedNationality: string&#xa;- selectedSort: string&#xa;- currentPage: number&#xa;- totalPages: number&#xa;- totalDirectors: number&#xa;- likeStates: Object&#xa;- likeLoading: Object&#xa;- loading: boolean&#xa;- filterDrawerOpen: boolean" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="component">
          <mxGeometry y="40" width="200" height="130" as="geometry" />
        </mxCell>
        <mxCell id="comp-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="component">
          <mxGeometry y="170" width="200" height="8" as="geometry" />
        </mxCell>
        <mxCell id="comp-method" value="+ loadDirectors(): void&#xa;+ fetchNationalities(): void&#xa;+ fetchSidebarMovies(): void&#xa;+ handleToggleLike(id, e): void&#xa;+ handlePageChange(page): void&#xa;+ handleDirectorClick(slug): void&#xa;+ resetFilters(): void" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="component">
          <mxGeometry y="178" width="200" height="72" as="geometry" />
        </mxCell>

        <!-- personApi Module -->
        <mxCell id="personApi" value="&lt;&lt;module&gt;&gt;&#xa;&lt;b&gt;personApi&lt;/b&gt;" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=35;fillColor=#ffe6cc;strokeColor=#d79b00;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="60" y="380" width="180" height="110" as="geometry" />
        </mxCell>
        <mxCell id="personApi-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="personApi">
          <mxGeometry y="35" width="180" height="8" as="geometry" />
        </mxCell>
        <mxCell id="personApi-method" value="+ getDirectorsAPI(params): Promise&#xa;+ getNationalitiesAPI(params): Promise&#xa;+ togglePersonLikeAPI(id, action): Promise" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="personApi">
          <mxGeometry y="43" width="180" height="67" as="geometry" />
        </mxCell>

        <!-- movieApi Module -->
        <mxCell id="movieApi" value="&lt;&lt;module&gt;&gt;&#xa;&lt;b&gt;movieApi&lt;/b&gt;" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=35;fillColor=#ffe6cc;strokeColor=#d79b00;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="280" y="380" width="180" height="85" as="geometry" />
        </mxCell>
        <mxCell id="movieApi-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="movieApi">
          <mxGeometry y="35" width="180" height="8" as="geometry" />
        </mxCell>
        <mxCell id="movieApi-method" value="+ getNowShowingMoviesAPI(limit): Promise" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="movieApi">
          <mxGeometry y="43" width="180" height="42" as="geometry" />
        </mxCell>

        <!-- localStorage (Browser) -->
        <mxCell id="localStorage" value="&lt;&lt;browser&gt;&gt;&#xa;&lt;b&gt;localStorage&lt;/b&gt;" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=35;fillColor=#f8cecc;strokeColor=#b85450;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="310" y="160" width="180" height="100" as="geometry" />
        </mxCell>
        <mxCell id="localStorage-attr" value="Key: director_liked_{id}&#xa;Value: 'true' | 'false'" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="localStorage">
          <mxGeometry y="35" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="localStorage-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="localStorage">
          <mxGeometry y="65" width="180" height="8" as="geometry" />
        </mxCell>
        <mxCell id="localStorage-method" value="+ getItem(key): string&#xa;+ setItem(key, value): void" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="localStorage">
          <mxGeometry y="73" width="180" height="27" as="geometry" />
        </mxCell>

        <!-- ========== BACKEND LAYER ========== -->
        <mxCell id="backend-layer" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e8f5e9;strokeColor=#2e7d32;strokeWidth=2;dashed=1;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="600" y="55" width="280" height="200" as="geometry" />
        </mxCell>
        <mxCell id="backend-label" value="&lt;b&gt;BACKEND LAYER (Node.js)&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#e8f5e9;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#2e7d32;" vertex="1" parent="1">
          <mxGeometry x="600" y="55" width="190" height="25" as="geometry" />
        </mxCell>

        <!-- PersonController -->
        <mxCell id="controller" value="&lt;&lt;controller&gt;&gt;&#xa;&lt;b&gt;PersonController&lt;/b&gt;" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=35;fillColor=#c8e6c9;strokeColor=#2e7d32;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="620" y="95" width="230" height="130" as="geometry" />
        </mxCell>
        <mxCell id="controller-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="controller">
          <mxGeometry y="35" width="230" height="8" as="geometry" />
        </mxCell>
        <mxCell id="controller-method" value="+ getDirectors(req, res): Response&#xa;+ getNationalities(req, res): Response&#xa;+ togglePersonLike(req, res): Response&#xa;+ getPersonBySlug(req, res): Response&#xa;+ incrementPersonView(req, res): Response" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="controller">
          <mxGeometry y="43" width="230" height="87" as="geometry" />
        </mxCell>

        <!-- ========== DATABASE LAYER ========== -->
        <mxCell id="db-layer" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fce4ec;strokeColor=#c2185b;strokeWidth=2;dashed=1;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="600" y="280" width="280" height="230" as="geometry" />
        </mxCell>
        <mxCell id="db-label" value="&lt;b&gt;DATABASE LAYER (MongoDB)&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#fce4ec;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#c2185b;" vertex="1" parent="1">
          <mxGeometry x="600" y="280" width="210" height="25" as="geometry" />
        </mxCell>

        <!-- Person Model -->
        <mxCell id="person" value="&lt;&lt;model&gt;&gt;&#xa;&lt;b&gt;Person&lt;/b&gt;" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=35;fillColor=#f8bbd9;strokeColor=#c2185b;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="620" y="315" width="180" height="180" as="geometry" />
        </mxCell>
        <mxCell id="person-attr" value="_id: ObjectId&#xa;name: string&#xa;slug: string&#xa;role: enum ['actor','director','both']&#xa;avatar: string&#xa;shortBio: string&#xa;nationality: string&#xa;viewCount: number&#xa;likeCount: number&#xa;isActive: boolean&#xa;createdAt: Date" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=9;" vertex="1" parent="person">
          <mxGeometry y="35" width="180" height="130" as="geometry" />
        </mxCell>
        <mxCell id="person-line" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="person">
          <mxGeometry y="165" width="180" height="15" as="geometry" />
        </mxCell>

        <!-- ========== RELATIONSHIPS ========== -->
        <!-- Component uses personApi -->
        <mxCell id="rel1" value="&lt;i&gt;uses&lt;/i&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#d79b00;" edge="1" parent="1" source="component" target="personApi">
          <mxGeometry x="0.2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- Component uses movieApi -->
        <mxCell id="rel2" value="&lt;i&gt;uses&lt;/i&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#d79b00;" edge="1" parent="1" source="component" target="movieApi">
          <mxGeometry x="0.2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- Component uses localStorage -->
        <mxCell id="rel3" value="&lt;i&gt;uses&lt;/i&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#b85450;" edge="1" parent="1" source="comp-attr" target="localStorage">
          <mxGeometry x="0.2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- personApi to Controller (HTTP) -->
        <mxCell id="rel4" value="&lt;i&gt;HTTP&lt;/i&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#2e7d32;strokeWidth=2;" edge="1" parent="1" source="personApi-method" target="controller">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Controller to Person (queries) -->
        <mxCell id="rel5" value="&lt;i&gt;queries&lt;/i&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#c2185b;strokeWidth=2;" edge="1" parent="1" source="controller" target="person">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
