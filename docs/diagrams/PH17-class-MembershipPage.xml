<mxfile host="app.diagrams.net" modified="2026-02-10T16:00:00.000Z" agent="Mozilla/5.0" version="21.0.0" type="device">
  <diagram name="Class Diagram - MembershipPage" id="class-membership-page">
    <mxGraphModel dx="1200" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- TITLE -->
        <mxCell id="title" value="&lt;b&gt;CLASS DIAGRAM RÚT GỌN – THÔNG TIN THÀNH VIÊN (Membership)&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=15;" vertex="1" parent="1">
          <mxGeometry x="200" y="10" width="650" height="30" as="geometry" />
        </mxCell>

        <!-- ==================== FRONTEND LAYER ==================== -->
        <mxCell id="fe-label" value="&lt;b&gt;FRONTEND LAYER&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="50" y="50" width="450" height="25" as="geometry" />
        </mxCell>

        <!-- MembershipPage Component -->
        <mxCell id="membership-page" value="&lt;b&gt;«component»&lt;/b&gt;&lt;br&gt;&lt;b&gt;MembershipPage&lt;/b&gt;" style="swimlane;fontStyle=0;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;collapsible=0;marginBottom=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="50" y="85" width="260" height="210" as="geometry" />
        </mxCell>
        <mxCell id="mp-attr1" value="- membershipData: Object" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="membership-page">
          <mxGeometry y="40" width="260" height="20" as="geometry" />
        </mxCell>
        <mxCell id="mp-attr2" value="- loading: Boolean" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="membership-page">
          <mxGeometry y="60" width="260" height="20" as="geometry" />
        </mxCell>
        <mxCell id="mp-attr3" value="- error: String" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="membership-page">
          <mxGeometry y="80" width="260" height="20" as="geometry" />
        </mxCell>
        <mxCell id="mp-attr4" value="- imageLoadingMap: Object" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="membership-page">
          <mxGeometry y="100" width="260" height="20" as="geometry" />
        </mxCell>
        <mxCell id="mp-attr5" value="- imageErrorMap: Object" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="membership-page">
          <mxGeometry y="120" width="260" height="20" as="geometry" />
        </mxCell>
        <mxCell id="mp-attr6" value="- sectionRefs: Object" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="membership-page">
          <mxGeometry y="140" width="260" height="20" as="geometry" />
        </mxCell>
        <mxCell id="mp-sep" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=10;rotatable=0;labelPosition=left;points=[];portConstraint=eastwest;" vertex="1" parent="membership-page">
          <mxGeometry y="160" width="260" height="8" as="geometry" />
        </mxCell>
        <mxCell id="mp-method1" value="+ handleImageLoad(slug): void" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="membership-page">
          <mxGeometry y="168" width="260" height="20" as="geometry" />
        </mxCell>
        <mxCell id="mp-method2" value="+ handleImageError(slug): void" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="membership-page">
          <mxGeometry y="188" width="260" height="20" as="geometry" />
        </mxCell>

        <!-- membershipInfoApi -->
        <mxCell id="api-class" value="&lt;b&gt;«module»&lt;/b&gt;&lt;br&gt;&lt;b&gt;membershipInfoApi&lt;/b&gt;" style="swimlane;fontStyle=0;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;collapsible=0;marginBottom=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="350" y="85" width="200" height="88" as="geometry" />
        </mxCell>
        <mxCell id="api-attr1" value="- api: AxiosInstance" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="api-class">
          <mxGeometry y="40" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="api-sep" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=10;rotatable=0;labelPosition=left;points=[];portConstraint=eastwest;" vertex="1" parent="api-class">
          <mxGeometry y="60" width="200" height="8" as="geometry" />
        </mxCell>
        <mxCell id="api-method1" value="+ getMembershipInfoAPI(): Promise" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="api-class">
          <mxGeometry y="68" width="200" height="20" as="geometry" />
        </mxCell>

        <!-- ==================== BACKEND LAYER ==================== -->
        <mxCell id="be-label" value="&lt;b&gt;BACKEND LAYER&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#e1d5e7;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="50" y="330" width="500" height="25" as="geometry" />
        </mxCell>

        <!-- MembershipInfoController -->
        <mxCell id="ctrl-class" value="&lt;b&gt;«controller»&lt;/b&gt;&lt;br&gt;&lt;b&gt;MembershipInfoController&lt;/b&gt;" style="swimlane;fontStyle=0;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;collapsible=0;marginBottom=0;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="50" y="365" width="260" height="128" as="geometry" />
        </mxCell>
        <mxCell id="ctrl-sep" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=10;rotatable=0;labelPosition=left;points=[];portConstraint=eastwest;" vertex="1" parent="ctrl-class">
          <mxGeometry y="40" width="260" height="8" as="geometry" />
        </mxCell>
        <mxCell id="ctrl-m1" value="+ getMembershipInfo(req, res)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="ctrl-class">
          <mxGeometry y="48" width="260" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ctrl-m2" value="+ updateMembershipInfo(req, res)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="ctrl-class">
          <mxGeometry y="68" width="260" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ctrl-m3" value="+ getAllMembershipInfo(req, res)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="ctrl-class">
          <mxGeometry y="88" width="260" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ctrl-m4" value="- cleanHtml(dirty): String" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="ctrl-class">
          <mxGeometry y="108" width="260" height="20" as="geometry" />
        </mxCell>

        <!-- MembershipInfoRoutes -->
        <mxCell id="routes-class" value="&lt;b&gt;«routes»&lt;/b&gt;&lt;br&gt;&lt;b&gt;MembershipInfoRoutes&lt;/b&gt;" style="swimlane;fontStyle=0;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;collapsible=0;marginBottom=0;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="350" y="365" width="200" height="108" as="geometry" />
        </mxCell>
        <mxCell id="routes-sep" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=10;rotatable=0;labelPosition=left;points=[];portConstraint=eastwest;" vertex="1" parent="routes-class">
          <mxGeometry y="40" width="200" height="8" as="geometry" />
        </mxCell>
        <mxCell id="routes-m1" value="GET / (Public)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="routes-class">
          <mxGeometry y="48" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="routes-m2" value="PUT / (Admin)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="routes-class">
          <mxGeometry y="68" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="routes-m3" value="GET /admin/all (Admin)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="routes-class">
          <mxGeometry y="88" width="200" height="20" as="geometry" />
        </mxCell>

        <!-- ==================== MODEL LAYER ==================== -->
        <mxCell id="model-label" value="&lt;b&gt;MODEL LAYER&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#f8cecc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="620" y="50" width="450" height="25" as="geometry" />
        </mxCell>

        <!-- MembershipInfo Model -->
        <mxCell id="model-class" value="&lt;b&gt;«model»&lt;/b&gt;&lt;br&gt;&lt;b&gt;MembershipInfo&lt;/b&gt;" style="swimlane;fontStyle=0;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;collapsible=0;marginBottom=0;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="620" y="85" width="230" height="148" as="geometry" />
        </mxCell>
        <mxCell id="model-attr1" value="title: String (required)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="model-class">
          <mxGeometry y="40" width="230" height="20" as="geometry" />
        </mxCell>
        <mxCell id="model-attr2" value="sections: [MembershipSection]" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="model-class">
          <mxGeometry y="60" width="230" height="20" as="geometry" />
        </mxCell>
        <mxCell id="model-attr3" value="status: String {active|draft}" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="model-class">
          <mxGeometry y="80" width="230" height="20" as="geometry" />
        </mxCell>
        <mxCell id="model-sep" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=10;rotatable=0;labelPosition=left;points=[];portConstraint=eastwest;" vertex="1" parent="model-class">
          <mxGeometry y="100" width="230" height="8" as="geometry" />
        </mxCell>
        <mxCell id="model-m1" value="pre-save: single-active hook" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="model-class">
          <mxGeometry y="108" width="230" height="20" as="geometry" />
        </mxCell>
        <mxCell id="model-m2" value="validator: sections.length ≥ 1" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="model-class">
          <mxGeometry y="128" width="230" height="20" as="geometry" />
        </mxCell>

        <!-- MembershipSection Sub-document -->
        <mxCell id="section-class" value="&lt;b&gt;«sub-document»&lt;/b&gt;&lt;br&gt;&lt;b&gt;MembershipSection&lt;/b&gt;" style="swimlane;fontStyle=0;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;collapsible=0;marginBottom=0;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="880" y="85" width="200" height="148" as="geometry" />
        </mxCell>
        <mxCell id="sec-attr1" value="title: String (required)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="section-class">
          <mxGeometry y="40" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="sec-attr2" value="slug: String (required)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="section-class">
          <mxGeometry y="60" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="sec-attr3" value="imageUrl: String" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="section-class">
          <mxGeometry y="80" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="sec-attr4" value="content: String (sanitized)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="section-class">
          <mxGeometry y="100" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="sec-attr5" value="sortOrder: Number (default=0)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;fontSize=11;" vertex="1" parent="section-class">
          <mxGeometry y="120" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="sec-sep" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=10;rotatable=0;labelPosition=left;points=[];portConstraint=eastwest;" vertex="1" parent="section-class">
          <mxGeometry y="140" width="200" height="8" as="geometry" />
        </mxCell>

        <!-- ==================== RELATIONSHIPS ==================== -->
        <!-- MembershipPage uses membershipInfoApi (Dependency) -->
        <mxCell id="rel1" value="&lt;i&gt;«uses»&lt;/i&gt;" style="endArrow=open;html=1;rounded=0;dashed=1;strokeWidth=1;fontSize=10;" edge="1" parent="1" source="membership-page" target="api-class">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- membershipInfoApi HTTP MembershipInfoController (Dependency) -->
        <mxCell id="rel2" value="&lt;i&gt;«HTTP»&lt;/i&gt;" style="endArrow=open;html=1;rounded=0;dashed=1;strokeWidth=1;fontSize=10;" edge="1" parent="1" source="api-class" target="ctrl-class">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Controller uses MembershipInfo Model (Dependency) -->
        <mxCell id="rel3" value="&lt;i&gt;«uses»&lt;/i&gt;" style="endArrow=open;html=1;rounded=0;dashed=1;strokeWidth=1;fontSize=10;" edge="1" parent="1" source="ctrl-class" target="model-class">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- MembershipInfo contains MembershipSection (Composition) -->
        <mxCell id="rel4" value="1..*" style="endArrow=diamondThin;endFill=1;html=1;rounded=0;strokeWidth=2;fontSize=11;" edge="1" parent="1" source="section-class" target="model-class">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Routes uses Controller -->
        <mxCell id="rel5" value="&lt;i&gt;«uses»&lt;/i&gt;" style="endArrow=open;html=1;rounded=0;dashed=1;strokeWidth=1;fontSize=10;" edge="1" parent="1" source="routes-class" target="ctrl-class">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ==================== LEGEND ==================== -->
        <mxCell id="legend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="620" y="280" width="230" height="120" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" value="&lt;b&gt;CHÚ THÍCH (Quan hệ)&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="620" y="285" width="230" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg1" value="- - - → «uses»/«HTTP»: Dependency" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="630" y="310" width="210" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg2" value="◆───── : Composition (embedded)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="630" y="335" width="210" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg3" value="sanitize-html: Loại bỏ inline style" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="630" y="360" width="210" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg4" value="_id: false → Không tạo _id cho section" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="630" y="380" width="210" height="20" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
