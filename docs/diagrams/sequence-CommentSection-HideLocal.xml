<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2026-01-13T08:33:19.000Z" agent="Mozilla/5.0" version="22.1.0" type="device">
  <diagram name="Sequence - Hide Review Local" id="sequence-hide-review">
    <mxGraphModel dx="1434" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="&lt;b&gt;SEQUENCE DIAGRAM - áº¨N BÃŒNH LUáº¬N Cá»¤C Bá»˜ (localStorage)&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="280" y="10" width="470" height="30" as="geometry" />
        </mxCell>

        <!-- Note: Client-side only -->
        <mxCell id="note-client" value="âš ï¸ Chá»©c nÄƒng nÃ y hoÃ n toÃ n CLIENT-SIDE, khÃ´ng gá»i API" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;fontStyle=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="800" y="50" width="180" height="40" as="geometry" />
        </mxCell>

        <!-- ==================== ACTORS/OBJECTS ==================== -->
        <!-- User -->
        <mxCell id="user-box" value="&lt;b&gt;User&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="60" y="50" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="user-line" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="user-box">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="95" y="90" as="sourcePoint" />
            <mxPoint x="95" y="1000" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- CommentSection -->
        <mxCell id="comment-box" value="&lt;b&gt;CommentSection&lt;/b&gt;&lt;br&gt;(Component)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="220" y="50" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="comment-line" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="comment-box">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="280" y="90" as="sourcePoint" />
            <mxPoint x="280" y="1000" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- localStorage -->
        <mxCell id="storage-box" value="&lt;b&gt;localStorage&lt;/b&gt;&lt;br&gt;(Browser)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="420" y="50" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="storage-line" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="storage-box">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="470" y="90" as="sourcePoint" />
            <mxPoint x="470" y="1000" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- UI State -->
        <mxCell id="state-box" value="&lt;b&gt;UI State&lt;/b&gt;&lt;br&gt;(hiddenByUser Set)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="600" y="50" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="state-line" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="state-box">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="660" y="90" as="sourcePoint" />
            <mxPoint x="660" y="1000" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- ==================== PHASE 1: INITIALIZATION ==================== -->
        <mxCell id="phase1" value="&lt;b&gt;PHASE 1: Component Mount (Khá»Ÿi táº¡o)&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="40" y="110" width="250" height="20" as="geometry" />
        </mxCell>

        <!-- 1. Component mount -->
        <mxCell id="msg1" value="1. useEffect: Component mount" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;fontSize=10;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="280" y="150" as="sourcePoint" />
            <mxPoint x="320" y="150" as="targetPoint" />
            <Array as="points">
              <mxPoint x="320" y="150" />
              <mxPoint x="320" y="165" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="msg1-return" value="" style="html=1;verticalAlign=bottom;endArrow=open;curved=0;rounded=0;fontSize=10;dashed=1;endFill=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="320" y="165" as="sourcePoint" />
            <mxPoint x="280" y="165" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- 2. Read localStorage -->
        <mxCell id="msg2" value="2. localStorage.getItem(&quot;hidden_reviews_{targetId}&quot;)" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;fontSize=10;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="280" y="195" as="sourcePoint" />
            <mxPoint x="470" y="195" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Activation bar localStorage -->
        <mxCell id="act-storage1" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="465" y="190" width="10" height="40" as="geometry" />
        </mxCell>

        <!-- 3. Return JSON string -->
        <mxCell id="msg3" value="3. Return: &quot;[&#39;id1&#39;, &#39;id2&#39;, ...]&quot; | null" style="html=1;verticalAlign=bottom;endArrow=open;curved=0;rounded=0;fontSize=10;dashed=1;endFill=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="470" y="225" as="sourcePoint" />
            <mxPoint x="280" y="225" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- 4. Parse JSON and create Set -->
        <mxCell id="msg4" value="4. JSON.parse() â†’ new Set(ids)" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;fontSize=10;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="280" y="255" as="sourcePoint" />
            <mxPoint x="660" y="255" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Activation bar State -->
        <mxCell id="act-state1" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="655" y="250" width="10" height="40" as="geometry" />
        </mxCell>

        <!-- 5. Set hiddenByUser state -->
        <mxCell id="msg5" value="5. setHiddenByUser(Set&amp;lt;reviewIds&amp;gt;)" style="html=1;verticalAlign=bottom;endArrow=open;curved=0;rounded=0;fontSize=10;dashed=1;endFill=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="660" y="285" as="sourcePoint" />
            <mxPoint x="280" y="285" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- 6. Filter reviews when render -->
        <mxCell id="msg6" value="6. Render: reviews.filter(r =&gt; !hiddenByUser.has(r._id))" style="html=1;verticalAlign=bottom;endArrow=open;curved=0;rounded=0;fontSize=10;dashed=1;endFill=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="280" y="315" as="sourcePoint" />
            <mxPoint x="95" y="315" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- ==================== PHASE 2: HIDE REVIEW ==================== -->
        <mxCell id="phase2" value="&lt;b&gt;PHASE 2: áº¨n bÃ¬nh luáº­n&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="40" y="355" width="150" height="20" as="geometry" />
        </mxCell>

        <!-- 7. User click menu -->
        <mxCell id="msg7" value="7. Click menu &quot;...&quot; â†’ &quot;áº¨n bÃ¬nh luáº­n nÃ y&quot;" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;fontSize=10;fontStyle=1" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="95" y="395" as="sourcePoint" />
            <mxPoint x="280" y="395" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Activation bar CommentSection -->
        <mxCell id="act-comment" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="275" y="390" width="10" height="200" as="geometry" />
        </mxCell>

        <!-- 8. Call hideReviewForMe -->
        <mxCell id="msg8" value="8. hideReviewForMe(reviewId)" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;fontSize=10;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="280" y="425" as="sourcePoint" />
            <mxPoint x="320" y="425" as="targetPoint" />
            <Array as="points">
              <mxPoint x="320" y="425" />
              <mxPoint x="320" y="440" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="msg8-return" value="" style="html=1;verticalAlign=bottom;endArrow=open;curved=0;rounded=0;fontSize=10;dashed=1;endFill=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="320" y="440" as="sourcePoint" />
            <mxPoint x="280" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- 9. Add to Set -->
        <mxCell id="msg9" value="9. hiddenByUser.add(reviewId)" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;fontSize=10;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="280" y="465" as="sourcePoint" />
            <mxPoint x="660" y="465" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Activation bar State 2 -->
        <mxCell id="act-state2" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="655" y="460" width="10" height="40" as="geometry" />
        </mxCell>

        <!-- 10. Update state -->
        <mxCell id="msg10" value="10. setHiddenByUser(new Set(...))" style="html=1;verticalAlign=bottom;endArrow=open;curved=0;rounded=0;fontSize=10;dashed=1;endFill=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="660" y="495" as="sourcePoint" />
            <mxPoint x="280" y="495" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- 11. Save to localStorage -->
        <mxCell id="msg11" value="11. localStorage.setItem(key, JSON.stringify([...set]))" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;fontSize=10;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="280" y="525" as="sourcePoint" />
            <mxPoint x="470" y="525" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Activation bar localStorage 2 -->
        <mxCell id="act-storage2" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="465" y="520" width="10" height="25" as="geometry" />
        </mxCell>

        <!-- 12. Toast -->
        <mxCell id="msg12" value="12. toast.info(&quot;ÄÃ£ áº©n 1 bÃ¬nh luáº­n&quot;)" style="html=1;verticalAlign=bottom;endArrow=open;curved=0;rounded=0;fontSize=10;dashed=1;endFill=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="280" y="560" as="sourcePoint" />
            <mxPoint x="95" y="560" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- 13. Show Chip -->
        <mxCell id="msg13" value="13. Render Chip: &quot;ÄÃ£ áº©n N bÃ¬nh luáº­n&quot; + HoÃ n tÃ¡c" style="html=1;verticalAlign=bottom;endArrow=open;curved=0;rounded=0;fontSize=10;dashed=1;endFill=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="280" y="590" as="sourcePoint" />
            <mxPoint x="95" y="590" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- ==================== PHASE 3: UNDO ==================== -->
        <mxCell id="phase3" value="&lt;b&gt;PHASE 3: HoÃ n tÃ¡c (Undo)&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#f8cecc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="40" y="640" width="160" height="20" as="geometry" />
        </mxCell>

        <!-- 14. User click Chip -->
        <mxCell id="msg14" value="14. Click Chip &quot;ÄÃ£ áº©n N bÃ¬nh luáº­n&quot;" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;fontSize=10;fontStyle=1" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="95" y="680" as="sourcePoint" />
            <mxPoint x="280" y="680" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Activation bar CommentSection 2 -->
        <mxCell id="act-comment2" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="275" y="675" width="10" height="200" as="geometry" />
        </mxCell>

        <!-- 15. Call clearAllHidden -->
        <mxCell id="msg15" value="15. clearAllHidden()" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;fontSize=10;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="280" y="710" as="sourcePoint" />
            <mxPoint x="320" y="710" as="targetPoint" />
            <Array as="points">
              <mxPoint x="320" y="710" />
              <mxPoint x="320" y="725" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="msg15-return" value="" style="html=1;verticalAlign=bottom;endArrow=open;curved=0;rounded=0;fontSize=10;dashed=1;endFill=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="320" y="725" as="sourcePoint" />
            <mxPoint x="280" y="725" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- 16. Clear Set -->
        <mxCell id="msg16" value="16. new Set() (empty)" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;fontSize=10;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="280" y="755" as="sourcePoint" />
            <mxPoint x="660" y="755" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Activation bar State 3 -->
        <mxCell id="act-state3" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="655" y="750" width="10" height="40" as="geometry" />
        </mxCell>

        <!-- 17. Update state with empty Set -->
        <mxCell id="msg17" value="17. setHiddenByUser(new Set())" style="html=1;verticalAlign=bottom;endArrow=open;curved=0;rounded=0;fontSize=10;dashed=1;endFill=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="660" y="785" as="sourcePoint" />
            <mxPoint x="280" y="785" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- 18. Update localStorage -->
        <mxCell id="msg18" value="18. localStorage.setItem(key, &quot;[]&quot;)" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;fontSize=10;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="280" y="815" as="sourcePoint" />
            <mxPoint x="470" y="815" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Activation bar localStorage 3 -->
        <mxCell id="act-storage3" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="465" y="810" width="10" height="25" as="geometry" />
        </mxCell>

        <!-- 19. Toast undo -->
        <mxCell id="msg19" value="19. toast.success(&quot;ÄÃ£ hiá»‡n láº¡i táº¥t cáº£ bÃ¬nh luáº­n&quot;)" style="html=1;verticalAlign=bottom;endArrow=open;curved=0;rounded=0;fontSize=10;dashed=1;endFill=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="280" y="850" as="sourcePoint" />
            <mxPoint x="95" y="850" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- 20. Re-render full list -->
        <mxCell id="msg20" value="20. Re-render: Hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§ danh sÃ¡ch bÃ¬nh luáº­n" style="html=1;verticalAlign=bottom;endArrow=open;curved=0;rounded=0;fontSize=10;dashed=1;endFill=0;fontStyle=1" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="280" y="880" as="sourcePoint" />
            <mxPoint x="95" y="880" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- ==================== NOTES ==================== -->
        <mxCell id="note1" value="&lt;b&gt;localStorage Key Format:&lt;/b&gt;&lt;br&gt;hidden_reviews_{targetId}&lt;br&gt;&lt;br&gt;VÃ­ dá»¥:&lt;br&gt;hidden_reviews_65a1b2c3d4..." style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;spacingLeft=5;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="800" y="150" width="170" height="90" as="geometry" />
        </mxCell>

        <mxCell id="note2" value="&lt;b&gt;hiddenByUser State:&lt;/b&gt;&lt;br&gt;Type: Set&amp;lt;string&amp;gt;&lt;br&gt;&lt;br&gt;LÆ°u trá»¯ cÃ¡c reviewId bá»‹&lt;br&gt;áº©n bá»Ÿi user trÃªn browser&lt;br&gt;hiá»‡n táº¡i" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;spacingLeft=5;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="800" y="260" width="170" height="95" as="geometry" />
        </mxCell>

        <mxCell id="note3" value="&lt;b&gt;Chip hiá»ƒn thá»‹:&lt;/b&gt;&lt;br&gt;&lt;br&gt;[ðŸ™ˆ ÄÃ£ áº©n 2 bÃ¬nh luáº­n]&lt;br&gt;â†’ Click Ä‘á»ƒ hiá»‡n láº¡i" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;spacingLeft=5;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="800" y="380" width="150" height="75" as="geometry" />
        </mxCell>

        <!-- Caption -->
        <mxCell id="caption" value="&lt;i&gt;HÃ¬nh 3.xx. SÆ¡ Ä‘á»“ Sequence Diagram â€“ Chá»©c nÄƒng áº¨n bÃ¬nh luáº­n cá»¥c bá»™ (localStorage)&lt;/i&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="280" y="950" width="450" height="20" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
